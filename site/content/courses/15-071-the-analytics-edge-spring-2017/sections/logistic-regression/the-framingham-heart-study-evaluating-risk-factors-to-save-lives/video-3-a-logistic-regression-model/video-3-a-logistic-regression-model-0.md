---
about_this_resource_text: ''
embedded_media:
  - id: Video-YouTube-Stream
    media_location: 0x4PfWpy-ls
    parent_uid: 51e8cebadabc6b3afbd25374c0538f4b
    title: Video-YouTube-Stream
    type: Video
    uid: 6439818fa5c4bf5d2756eab85e89790f
  - id: 3Play-3Play YouTube id-Stream
    media_location: 0x4PfWpy-ls
    parent_uid: 51e8cebadabc6b3afbd25374c0538f4b
    title: 3Play-3Play YouTube id
    type: 3Play
    uid: ad518332436fea5ae93eb46a0231e10d
  - id: 0x4PfWpy-ls.srt
    parent_uid: 51e8cebadabc6b3afbd25374c0538f4b
    technical_location: >-
      https://ocw.mit.edu/courses/sloan-school-of-management/15-071-the-analytics-edge-spring-2017/logistic-regression/the-framingham-heart-study-evaluating-risk-factors-to-save-lives/video-3-a-logistic-regression-model/video-3-a-logistic-regression-model-0/0x4PfWpy-ls.srt
    title: 3play caption file
    type: null
    uid: 6c37bee025c4a07991a28be549c04e51
  - id: 0x4PfWpy-ls.pdf
    parent_uid: 51e8cebadabc6b3afbd25374c0538f4b
    technical_location: >-
      https://ocw.mit.edu/courses/sloan-school-of-management/15-071-the-analytics-edge-spring-2017/logistic-regression/the-framingham-heart-study-evaluating-risk-factors-to-save-lives/video-3-a-logistic-regression-model/video-3-a-logistic-regression-model-0/0x4PfWpy-ls.pdf
    title: 3play pdf file
    type: null
    uid: a21d6ac42e8b2bb03204d4a50660a026
  - id: Caption-3Play YouTube id-SRT
    parent_uid: 51e8cebadabc6b3afbd25374c0538f4b
    title: Caption-3Play YouTube id-SRT-English - US
    type: Caption
    uid: ce0c885d6360a5d513e2576edf83b980
  - id: Transcript-3Play YouTube id-PDF
    parent_uid: 51e8cebadabc6b3afbd25374c0538f4b
    title: Transcript-3Play YouTube id-PDF-English - US
    type: Transcript
    uid: 76487fab3881125306bff2987d203405
  - id: Thumbnail-YouTube-JPG
    media_location: 'https://img.youtube.com/vi/0x4PfWpy-ls/default.jpg'
    parent_uid: 51e8cebadabc6b3afbd25374c0538f4b
    title: Thumbnail-YouTube-JPG
    type: Thumbnail
    uid: a9be73bd3bb4b20e94fb633f2b886372
  - id: Video-InternetArchive-MP4
    media_location: >-
      https://archive.org/download/MIT15.071S17/MIT15_071S17_Session_3.3.05_300k.mp4
    parent_uid: 51e8cebadabc6b3afbd25374c0538f4b
    title: Video-Internet Archive-MP4
    type: Video
    uid: cf29e96e3aa70248b1ede6c9f5ed4925
inline_embed_id: 47003477video3alogisticregressionmodel82226928
order_index: 643
parent_uid: 8a9ba6a68196ffcd9f101b66733dbcb0
related_resources_text: ''
short_url: video-3-a-logistic-regression-model-0
technical_location: >-
  https://ocw.mit.edu/courses/sloan-school-of-management/15-071-the-analytics-edge-spring-2017/logistic-regression/the-framingham-heart-study-evaluating-risk-factors-to-save-lives/video-3-a-logistic-regression-model/video-3-a-logistic-regression-model-0
title: 'Video 3: A Logistic Regression Model'
transcript: >-
  <p><span m='4500'>Now</span> <span m='4814'>that</span> <span
  m='5128'>we</span> <span m='5442'>have</span> <span m='5756'>identified</span>
  <span m='6070'>a</span> <span m='6384'>set</span> <span m='6698'>of</span>
  <span m='7012'>risk</span> <span m='7326'>factors,</span> <span
  m='7640'>let's</span> <span m='8063'>use</span> <span m='8486'>this</span>
  <span m='8910'>data</span> <span m='9333'>to</span> <span
  m='9756'>predict</span> <span m='10180'>the</span> <span m='10603'>10</span>
  <span m='11026'>year</span> <span m='11450'>risk</span> <span
  m='11873'>of</span> <span m='12296'>CHD.</span> </p><p><span
  m='12720'>First,</span> <span m='13131'>we'll</span> <span
  m='13543'>randomly</span> <span m='13955'>split</span> <span
  m='14366'>our</span> <span m='14778'>patients</span> <span
  m='15190'>into</span> <span m='15593'>a</span> <span m='15997'>training</span>
  <span m='16401'>set</span> <span m='16805'>and</span> <span m='17208'>a</span>
  <span m='17612'>testing</span> <span m='18016'>set.</span> </p><p><span
  m='18420'>Then,</span> <span m='18902'>we'll</span> <span m='19384'>use</span>
  <span m='19866'>logistic</span> <span m='20348'>regression</span> <span
  m='20830'>to</span> <span m='21270'>predict</span> <span
  m='21710'>whether</span> <span m='22150'>or</span> <span m='22590'>not</span>
  <span m='23030'>a</span> <span m='23470'>patient</span> <span
  m='23910'>experienced</span> <span m='24350'>CHD</span> <span
  m='24790'>within</span> <span m='25340'>10</span> <span m='25890'>years</span>
  <span m='26440'>of</span> <span m='26990'>the</span> <span
  m='27540'>first</span> <span m='28090'>examination.</span> </p><p><span
  m='28640'>Keep</span> <span m='28880'>in</span> <span m='29120'>mind</span>
  <span m='29360'>that</span> <span m='29600'>all</span> <span
  m='29840'>of</span> <span m='30080'>the</span> <span m='30320'>risk</span>
  <span m='30560'>factors</span> <span m='30800'>were</span> <span
  m='31353'>collected</span> <span m='31906'>at</span> <span
  m='32460'>the</span> <span m='33013'>first</span> <span
  m='33566'>examination</span> <span m='34120'>of</span> <span
  m='34673'>the</span> <span m='35226'>patients.</span> </p><p><span
  m='35780'>After</span> <span m='36173'>building</span> <span
  m='36566'>our</span> <span m='36960'>model,</span> <span
  m='37353'>we'll</span> <span m='37746'>evaluate</span> <span
  m='38140'>the</span> <span m='38533'>predictive</span> <span
  m='38926'>power</span> <span m='39320'>of</span> <span m='39681'>the</span>
  <span m='40042'>model</span> <span m='40404'>on</span> <span
  m='40765'>the</span> <span m='41127'>test</span> <span m='41488'>set.</span>
  </p><p><span m='41850'>Let's</span> <span m='42338'>go</span> <span
  m='42826'>to</span> <span m='43314'>R</span> <span m='43802'>and</span> <span
  m='44290'>create</span> <span m='44778'>our</span> <span
  m='45266'>logistic</span> <span m='45754'>regression</span> <span
  m='46242'>model.</span> </p><p><span m='46730'>In</span> <span
  m='47179'>our</span> <span m='47628'>R</span> <span m='48077'>console,</span>
  <span m='48526'>we'll</span> <span m='48975'>call</span> <span
  m='49424'>our</span> <span m='49873'>data</span> <span m='50322'>set</span>
  <span m='50771'>framingham</span> <span m='51220'>and</span> <span
  m='51672'>use</span> <span m='52125'>the</span> <span
  m='52578'>read.csv</span> <span m='53030'>function</span> <span
  m='53483'>to</span> <span m='53936'>read</span> <span m='54389'>in</span>
  <span m='54841'>the</span> <span m='55294'>data</span> <span
  m='55747'>file</span> <span m='56200'>"framingham.csv".</span> </p><p><span
  m='59760'>Remember</span> <span m='60125'>to</span> <span
  m='60491'>navigate</span> <span m='60857'>to</span> <span m='61222'>the</span>
  <span m='61588'>directory</span> <span m='61954'>containing</span> <span
  m='62320'>the</span> <span m='63021'>file</span> <span
  m='63722'>"framingham.csv"</span> <span m='64423'>before</span> <span
  m='65125'>reading</span> <span m='65826'>in</span> <span m='66527'>the</span>
  <span m='67228'>data.</span> </p><p><span m='67930'>Let's</span> <span
  m='68182'>take</span> <span m='68435'>a</span> <span m='68687'>look</span>
  <span m='68940'>at</span> <span m='69192'>our</span> <span
  m='69445'>data</span> <span m='69697'>by</span> <span m='69950'>using</span>
  <span m='70202'>the</span> <span m='70455'>str</span> <span
  m='70707'>function.</span> </p><p><span m='74720'>We</span> <span
  m='75395'>have</span> <span m='76071'>data</span> <span m='76746'>for</span>
  <span m='77422'>4,240</span> <span m='78097'>patients</span> <span
  m='78773'>and</span> <span m='79448'>16</span> <span
  m='80124'>variables.</span> </p><p><span m='80800'>We</span> <span
  m='81258'>have</span> <span m='81717'>the</span> <span
  m='82176'>demographic</span> <span m='82635'>risk</span> <span
  m='83093'>factors</span> <span m='83552'>male,</span> <span
  m='84011'>age,</span> <span m='84470'>and</span> <span
  m='85024'>education;</span> <span m='85578'>the</span> <span
  m='86132'>behavioral</span> <span m='86686'>risk</span> <span
  m='87240'>factors</span> <span m='88150'>currentSmoker</span> <span
  m='89060'>and</span> <span m='89970'>cigsPerDay;</span> <span
  m='90880'>the</span> <span m='91731'>medical</span> <span
  m='92582'>history</span> <span m='93434'>risk</span> <span
  m='94285'>factors</span> <span m='95137'>BPMeds,</span> <span
  m='95988'>prevalentStroke,</span> <span m='96840'>prevalentHyp,</span> <span
  m='97422'>and</span> <span m='98005'>diabetes;</span> <span
  m='98587'>and</span> <span m='99170'>the</span> <span
  m='99752'>physical</span> <span m='100335'>exam</span> <span
  m='100917'>risk</span> <span m='101500'>factors</span> <span
  m='102637'>totChol,</span> <span m='103775'>sysBP,</span> <span
  m='104912'>diaBP,</span> <span m='106050'>BMI,</span> <span
  m='107187'>heartRate,</span> <span m='108325'>and</span> <span
  m='109462'>glucose</span> <span m='110600'>level.</span> </p><p><span
  m='111890'>The</span> <span m='112340'>last</span> <span
  m='112790'>variable</span> <span m='113240'>is</span> <span
  m='113690'>the</span> <span m='114140'>outcome</span> <span
  m='114590'>or</span> <span m='115040'>dependent</span> <span
  m='115490'>variable,</span> <span m='115940'>whether</span> <span
  m='116273'>or</span> <span m='116606'>not</span> <span m='116940'>the</span>
  <span m='117273'>patient</span> <span m='117606'>developed</span> <span
  m='117940'>CHD</span> <span m='118510'>in</span> <span m='119080'>the</span>
  <span m='119650'>next</span> <span m='120220'>10</span> <span
  m='120790'>years.</span> </p><p><span m='121360'>Now</span> <span
  m='121698'>let's</span> <span m='122036'>split</span> <span
  m='122375'>our</span> <span m='122713'>data</span> <span
  m='123052'>into</span> <span m='123390'>a</span> <span
  m='123729'>training</span> <span m='124067'>set</span> <span
  m='124406'>and</span> <span m='124744'>a</span> <span
  m='125083'>testing</span> <span m='125421'>set</span> <span
  m='125760'>using</span> <span m='126266'>sample.split</span> <span
  m='126773'>like</span> <span m='127280'>we</span> <span m='127786'>did</span>
  <span m='128293'>in</span> <span m='128800'>the</span> <span
  m='129306'>previous</span> <span m='129813'>lecture.</span> </p><p><span
  m='130320'>We</span> <span m='130702'>first</span> <span
  m='131085'>need</span> <span m='131467'>to</span> <span m='131850'>load</span>
  <span m='132232'>the</span> <span m='132615'>library</span> <span
  m='132997'>caTools.</span> </p><p><span m='137660'>Now,</span> <span
  m='138095'>let's</span> <span m='138530'>set</span> <span
  m='138966'>our</span> <span m='139401'>seed</span> <span m='139837'>and</span>
  <span m='140272'>create</span> <span m='140708'>our</span> <span
  m='141143'>split.</span> </p><p><span m='141579'>We'll</span> <span
  m='142110'>start</span> <span m='142641'>by</span> <span
  m='143172'>setting</span> <span m='143704'>our</span> <span
  m='144235'>seed</span> <span m='144766'>to</span> <span
  m='145297'>1000,</span> <span m='145829'>and</span> <span
  m='146369'>then</span> <span m='146909'>use</span> <span m='147449'>the</span>
  <span m='147989'>sample.split</span> <span m='148529'>function</span> <span
  m='149069'>to</span> <span m='149609'>create</span> <span
  m='150149'>the</span> <span m='150689'>split.</span> </p><p><span
  m='155170'>The</span> <span m='155594'>first</span> <span
  m='156018'>argument</span> <span m='156442'>is</span> <span
  m='156867'>the</span> <span m='157291'>outcome</span> <span
  m='157715'>variable</span> <span m='158140'>framingham$TenYearCHD.</span>
  </p><p><span m='163970'>And</span> <span m='164294'>the</span> <span
  m='164618'>second</span> <span m='164943'>argument</span> <span
  m='165267'>is</span> <span m='165592'>the</span> <span
  m='165916'>percentage</span> <span m='166241'>of</span> <span
  m='166565'>data</span> <span m='166890'>that</span> <span m='167289'>we</span>
  <span m='167688'>want</span> <span m='168087'>in</span> <span
  m='168486'>the</span> <span m='168885'>training</span> <span
  m='169284'>set</span> <span m='169683'>or</span> <span m='170082'>the</span>
  <span m='170481'>SplitRatio.</span> </p><p><span m='170880'>Here,</span> <span
  m='171310'>we'll</span> <span m='171741'>put</span> <span
  m='172172'>65%</span> <span m='172603'>of</span> <span m='173034'>the</span>
  <span m='173465'>data</span> <span m='173896'>in</span> <span
  m='174327'>the</span> <span m='174758'>training</span> <span
  m='175189'>set.</span> </p><p><span m='175620'>When</span> <span
  m='175917'>you</span> <span m='176215'>have</span> <span
  m='176513'>more</span> <span m='176811'>data</span> <span
  m='177108'>like</span> <span m='177406'>we</span> <span m='177704'>do</span>
  <span m='178002'>here,</span> <span m='178300'>you</span> <span
  m='178582'>can</span> <span m='178865'>afford</span> <span
  m='179148'>to</span> <span m='179430'>put</span> <span m='179713'>less</span>
  <span m='179996'>data</span> <span m='180279'>in</span> <span
  m='180561'>the</span> <span m='180844'>training</span> <span
  m='181127'>set</span> <span m='181410'>and</span> <span m='181783'>more</span>
  <span m='182156'>in</span> <span m='182530'>the</span> <span
  m='182903'>testing</span> <span m='183276'>set.</span> </p><p><span
  m='183650'>This</span> <span m='184042'>will</span> <span
  m='184434'>increase</span> <span m='184826'>our</span> <span
  m='185218'>confidence</span> <span m='185610'>in</span> <span
  m='185870'>the</span> <span m='186131'>ability</span> <span
  m='186392'>of</span> <span m='186653'>the</span> <span m='186914'>model</span>
  <span m='187175'>to</span> <span m='187436'>extend</span> <span
  m='187697'>to</span> <span m='187958'>new</span> <span m='188219'>data</span>
  <span m='188480'>since</span> <span m='188797'>we</span> <span
  m='189115'>have</span> <span m='189433'>a</span> <span
  m='189751'>larger</span> <span m='190068'>test</span> <span
  m='190386'>set,</span> <span m='190704'>and</span> <span
  m='191022'>still</span> <span m='191340'>give</span> <span
  m='191586'>us</span> <span m='191832'>enough</span> <span
  m='192078'>data</span> <span m='192325'>in</span> <span m='192571'>the</span>
  <span m='192817'>training</span> <span m='193063'>set</span> <span
  m='193310'>to</span> <span m='193747'>create</span> <span
  m='194185'>our</span> <span m='194622'>model.</span> </p><p><span
  m='195060'>You</span> <span m='195454'>typically</span> <span
  m='195848'>want</span> <span m='196242'>to</span> <span m='196636'>put</span>
  <span m='197030'>somewhere</span> <span m='197424'>between</span> <span
  m='197818'>50%</span> <span m='198212'>and</span> <span m='198606'>80%</span>
  <span m='199000'>of</span> <span m='199447'>the</span> <span
  m='199894'>data</span> <span m='200341'>in</span> <span m='200788'>the</span>
  <span m='201235'>training</span> <span m='201682'>set.</span> </p><p><span
  m='202130'>Now,</span> <span m='202493'>let's</span> <span
  m='202857'>split</span> <span m='203221'>up</span> <span m='203585'>our</span>
  <span m='203948'>data</span> <span m='204312'>using</span> <span
  m='204676'>subset.</span> </p><p><span m='205040'>We'll</span> <span
  m='205565'>call</span> <span m='206090'>our</span> <span
  m='206615'>training</span> <span m='207140'>set</span> <span
  m='207665'>"train"</span> <span m='208190'>and</span> <span
  m='208572'>use</span> <span m='208955'>the</span> <span
  m='209338'>subset</span> <span m='209720'>function</span> <span
  m='210103'>to</span> <span m='210486'>take</span> <span m='210869'>a</span>
  <span m='211251'>subset</span> <span m='211634'>of</span> <span
  m='212017'>framingham</span> <span m='212400'>and</span> <span
  m='212846'>take</span> <span m='213292'>the</span> <span
  m='213739'>observations</span> <span m='214185'>for</span> <span
  m='214631'>which</span> <span m='215078'>split</span> <span
  m='215524'>is</span> <span m='215970'>equal</span> <span m='216417'>to</span>
  <span m='216863'>TRUE.</span> </p><p><span m='217310'>We'll</span> <span
  m='217713'>call</span> <span m='218116'>our</span> <span
  m='218520'>testing</span> <span m='218923'>set</span> <span
  m='219326'>"test"</span> <span m='219730'>and</span> <span
  m='220090'>again</span> <span m='220450'>use</span> <span
  m='220810'>the</span> <span m='221170'>subset</span> <span
  m='221530'>function</span> <span m='221890'>to</span> <span
  m='222240'>take</span> <span m='222590'>a</span> <span
  m='222940'>subset</span> <span m='223290'>of</span> <span
  m='223640'>framingham</span> <span m='223990'>and</span> <span
  m='224340'>take</span> <span m='224690'>the</span> <span
  m='225077'>observations</span> <span m='225464'>for</span> <span
  m='225851'>which</span> <span m='226238'>split</span> <span
  m='226625'>equals</span> <span m='227012'>FALSE.</span> </p><p><span
  m='231120'>Now</span> <span m='231452'>we're</span> <span
  m='231785'>ready</span> <span m='232117'>to</span> <span
  m='232450'>build</span> <span m='232782'>our</span> <span
  m='233115'>logistic</span> <span m='233447'>regression</span> <span
  m='233780'>model</span> <span m='234280'>using</span> <span
  m='234780'>the</span> <span m='235280'>training</span> <span
  m='235780'>set.</span> </p><p><span m='236280'>Let's</span> <span
  m='236886'>call</span> <span m='237492'>it</span> <span
  m='238098'>framinghamLog,</span> <span m='238704'>and</span> <span
  m='239310'>we'll</span> <span m='239916'>use</span> <span
  m='240522'>the</span> <span m='241128'>glm</span> <span
  m='241734'>function</span> <span m='242340'>like</span> <span
  m='242600'>we</span> <span m='242860'>did</span> <span m='243120'>in</span>
  <span m='243380'>the</span> <span m='243640'>previous</span> <span
  m='243900'>lecture</span> <span m='244160'>to</span> <span
  m='244766'>create</span> <span m='245373'>a</span> <span
  m='245980'>logistic</span> <span m='246586'>regression</span> <span
  m='247193'>model.</span> </p><p><span m='247800'>We'll</span> <span
  m='248044'>use</span> <span m='248288'>a</span> <span m='248532'>nice</span>
  <span m='248777'>little</span> <span m='249021'>trick</span> <span
  m='249265'>here</span> <span m='249510'>where</span> <span
  m='249880'>we</span> <span m='250250'>predict</span> <span
  m='250620'>our</span> <span m='250990'>dependent</span> <span
  m='251360'>variable</span> <span m='251730'>using</span> <span
  m='252002'>all</span> <span m='252274'>of</span> <span m='252546'>the</span>
  <span m='252818'>other</span> <span m='253090'>variables</span> <span
  m='253362'>in</span> <span m='253634'>the</span> <span m='253906'>data</span>
  <span m='254178'>set</span> <span m='254450'>as</span> <span
  m='255236'>independent</span> <span m='256023'>variables.</span> </p><p><span
  m='256810'>First,</span> <span m='257223'>type</span> <span
  m='257637'>the</span> <span m='258051'>name</span> <span m='258465'>of</span>
  <span m='258878'>the</span> <span m='259292'>dependent</span> <span
  m='259706'>variable,</span> <span m='260120'>TenYearCHD,</span> <span
  m='260763'>followed</span> <span m='261406'>by</span> <span
  m='262050'>the</span> <span m='262693'>tilde</span> <span
  m='263336'>and</span> <span m='263980'>then</span> <span m='264623'>a</span>
  <span m='265266'>period.</span> </p><p><span m='268560'>This</span> <span
  m='268840'>will</span> <span m='269120'>use</span> <span m='269400'>all</span>
  <span m='269680'>of</span> <span m='269960'>the</span> <span
  m='270240'>other</span> <span m='270520'>variables</span> <span
  m='270800'>in</span> <span m='271201'>the</span> <span m='271602'>data</span>
  <span m='272004'>set</span> <span m='272405'>as</span> <span
  m='272807'>independent</span> <span m='273208'>variables</span> <span
  m='273610'>and</span> <span m='273941'>is</span> <span m='274272'>used</span>
  <span m='274603'>in</span> <span m='274935'>place</span> <span
  m='275266'>of</span> <span m='275597'>listing</span> <span
  m='275928'>out</span> <span m='276260'>all</span> <span m='276672'>of</span>
  <span m='277085'>the</span> <span m='277498'>independent</span> <span
  m='277911'>variables'</span> <span m='278324'>names</span> <span
  m='278737'>separated</span> <span m='279150'>by</span> <span
  m='279717'>the</span> <span m='280285'>plus</span> <span
  m='280852'>sign.</span> </p><p><span m='281420'>Be</span> <span
  m='281694'>careful</span> <span m='281968'>doing</span> <span
  m='282242'>this</span> <span m='282517'>with</span> <span
  m='282791'>data</span> <span m='283065'>sets</span> <span
  m='283340'>that</span> <span m='283720'>have</span> <span
  m='284100'>identifying</span> <span m='284480'>variables</span> <span
  m='284860'>like</span> <span m='285240'>a</span> <span
  m='285620'>patient</span> <span m='286000'>ID</span> <span
  m='286380'>or</span> <span m='286680'>name</span> <span
  m='286980'>since</span> <span m='287280'>you</span> <span
  m='287580'>wouldn't</span> <span m='287880'>want</span> <span
  m='288180'>to</span> <span m='288480'>use</span> <span m='288780'>these</span>
  <span m='289680'>as</span> <span m='290580'>independent</span> <span
  m='291480'>variables.</span> </p><p><span m='292380'>Following</span> <span
  m='292682'>the</span> <span m='292984'>period,</span> <span
  m='293286'>we</span> <span m='293588'>need</span> <span m='293891'>to</span>
  <span m='294193'>give</span> <span m='294495'>the</span> <span
  m='294797'>argument</span> <span m='295100'>that</span> <span
  m='295530'>defines</span> <span m='295961'>the</span> <span
  m='296392'>data</span> <span m='296823'>set</span> <span m='297254'>to</span>
  <span m='297685'>use,</span> <span m='298116'>data</span> <span
  m='298547'>=</span> <span m='298978'>train.</span> </p><p><span
  m='299409'>And</span> <span m='299757'>then,</span> <span
  m='300105'>the</span> <span m='300453'>final</span> <span
  m='300801'>argument</span> <span m='301149'>for</span> <span
  m='301497'>a</span> <span m='301845'>logistic</span> <span
  m='302193'>regression</span> <span m='302541'>model</span> <span
  m='302890'>is</span> <span m='303372'>family</span> <span m='303855'>=</span>
  <span m='304337'>binomial.</span> </p><p><span m='307450'>Let's</span> <span
  m='307655'>take</span> <span m='307860'>a</span> <span m='308065'>look</span>
  <span m='308270'>at</span> <span m='308475'>the</span> <span
  m='308680'>summary</span> <span m='308885'>of</span> <span
  m='309090'>our</span> <span m='309295'>model.</span> </p><p><span
  m='317810'>It</span> <span m='318531'>looks</span> <span
  m='319252'>like</span> <span m='319974'>male,</span> <span
  m='320695'>age,</span> <span m='321417'>prevalent</span> <span
  m='322138'>stroke,</span> <span m='322860'>total</span> <span
  m='323464'>cholesterol,</span> <span m='324068'>systolic</span> <span
  m='324672'>blood</span> <span m='325277'>pressure,</span> <span
  m='325881'>and</span> <span m='326485'>glucose</span> <span
  m='327090'>are</span> <span m='327568'>all</span> <span
  m='328046'>significant</span> <span m='328525'>in</span> <span
  m='329003'>our</span> <span m='329481'>model.</span> </p><p><span
  m='329960'>Cigarettes</span> <span m='330413'>per</span> <span
  m='330866'>day</span> <span m='331320'>and</span> <span
  m='331773'>prevalent</span> <span m='332226'>hypertension</span> <span
  m='332680'>are</span> <span m='333506'>almost</span> <span
  m='334332'>significant.</span> </p><p><span m='335159'>All</span> <span
  m='335739'>of</span> <span m='336319'>significant</span> <span
  m='336899'>variables</span> <span m='337479'>have</span> <span
  m='338059'>positive</span> <span m='338639'>coefficients,</span> <span
  m='339220'>meaning</span> <span m='339627'>that</span> <span
  m='340034'>higher</span> <span m='340441'>values</span> <span
  m='340848'>in</span> <span m='341255'>these</span> <span
  m='341662'>variables</span> <span m='342070'>contribute</span> <span
  m='342504'>to</span> <span m='342938'>a</span> <span m='343372'>higher</span>
  <span m='343806'>probability</span> <span m='344240'>of</span> <span
  m='344962'>10-year</span> <span m='345684'>coronary</span> <span
  m='346406'>heart</span> <span m='347128'>disease.</span> </p><p><span
  m='347850'>Now,</span> <span m='348186'>let's</span> <span
  m='348522'>use</span> <span m='348858'>this</span> <span
  m='349195'>model</span> <span m='349531'>to</span> <span
  m='349867'>make</span> <span m='350203'>predictions</span> <span
  m='350540'>on</span> <span m='350892'>our</span> <span m='351245'>test</span>
  <span m='351597'>set.</span> </p><p><span m='351950'>We'll</span> <span
  m='352812'>call</span> <span m='353674'>our</span> <span
  m='354536'>predictions</span> <span m='355398'>predictTest</span> <span
  m='356260'>and</span> <span m='356611'>use</span> <span m='356963'>the</span>
  <span m='357315'>predict</span> <span m='357666'>function,</span> <span
  m='358018'>which</span> <span m='358370'>takes</span> <span
  m='358905'>as</span> <span m='359441'>arguments</span> <span
  m='359976'>the</span> <span m='360512'>name</span> <span m='361047'>of</span>
  <span m='361583'>our</span> <span m='362118'>model,</span> <span
  m='362654'>framinghamLog,</span> <span m='363190'>then</span> <span
  m='363890'>type</span> <span m='364590'>=</span> <span
  m='365290'>"response",</span> <span m='365990'>which</span> <span
  m='366690'>gives</span> <span m='367390'>us</span> <span
  m='368090'>probabilities,</span> <span m='368790'>and</span> <span
  m='369506'>lastly</span> <span m='370222'>newdata</span> <span
  m='370939'>=</span> <span m='371655'>test,</span> <span m='372371'>the</span>
  <span m='373088'>name</span> <span m='373804'>of</span> <span
  m='374520'>our</span> <span m='375237'>testing</span> <span
  m='375953'>set.</span> </p><p><span m='376670'>Now,</span> <span
  m='377057'>let's</span> <span m='377445'>use</span> <span m='377832'>a</span>
  <span m='378220'>threshold</span> <span m='378607'>value</span> <span
  m='378995'>of</span> <span m='379382'>0.5</span> <span m='379770'>to</span>
  <span m='380288'>create</span> <span m='380806'>a</span> <span
  m='381324'>confusion</span> <span m='381842'>matrix.</span> </p><p><span
  m='382360'>We'll</span> <span m='382743'>use</span> <span
  m='383127'>the</span> <span m='383510'>table</span> <span
  m='383894'>function</span> <span m='384278'>and</span> <span
  m='384661'>give</span> <span m='385045'>as</span> <span m='385429'>the</span>
  <span m='385812'>first</span> <span m='386196'>argument,</span> <span
  m='386580'>the</span> <span m='388332'>actual</span> <span
  m='390085'>values,</span> <span m='391837'>test$TenYearCHD,</span> <span
  m='393590'>and</span> <span m='394015'>then</span> <span m='394440'>as</span>
  <span m='394865'>the</span> <span m='395290'>second</span> <span
  m='395715'>argument</span> <span m='396140'>our</span> <span
  m='396565'>predictions,</span> <span m='396990'>predictTest</span> <span
  m='398723'>&gt;</span> <span m='400456'>0.5.</span> </p><p><span
  m='402190'>With</span> <span m='402590'>a</span> <span
  m='402991'>threshold</span> <span m='403392'>of</span> <span
  m='403793'>0.5,</span> <span m='404194'>we</span> <span
  m='404595'>predict</span> <span m='404996'>an</span> <span
  m='405397'>outcome</span> <span m='405798'>of</span> <span
  m='406199'>1,</span> <span m='406600'>the</span> <span m='407206'>true</span>
  <span m='407812'>column,</span> <span m='408418'>very</span> <span
  m='409024'>rarely.</span> </p><p><span m='409630'>This</span> <span
  m='410028'>means</span> <span m='410426'>that</span> <span
  m='410824'>our</span> <span m='411222'>model</span> <span
  m='411620'>rarely</span> <span m='412018'>predicts</span> <span
  m='412416'>a</span> <span m='412814'>10-year</span> <span
  m='413212'>CHD</span> <span m='413610'>risk</span> <span
  m='414663'>above</span> <span m='415716'>50%.</span> </p><p><span
  m='416770'>What</span> <span m='417187'>is</span> <span m='417604'>the</span>
  <span m='418021'>accuracy</span> <span m='418438'>of</span> <span
  m='418855'>this</span> <span m='419272'>model?</span> </p><p><span
  m='419690'>Well,</span> <span m='420120'>it's</span> <span
  m='420550'>the</span> <span m='420980'>sum</span> <span m='421410'>of</span>
  <span m='421840'>the</span> <span m='422270'>cases</span> <span
  m='422700'>we</span> <span m='423130'>get</span> <span
  m='423560'>right,</span> <span m='423990'>1069</span> <span
  m='424420'>plus</span> <span m='424850'>11,</span> <span
  m='425280'>divided</span> <span m='425610'>by</span> <span
  m='425940'>the</span> <span m='426270'>total</span> <span
  m='426600'>number</span> <span m='426930'>of</span> <span
  m='427260'>observations</span> <span m='427590'>in</span> <span
  m='427920'>our</span> <span m='428250'>data</span> <span
  m='428580'>set,</span> <span m='429476'>1069</span> <span m='430372'>+</span>
  <span m='431268'>6</span> <span m='432165'>+</span> <span
  m='433061'>187</span> <span m='433957'>+</span> <span m='434853'>11.</span>
  </p><p><span m='435750'>So</span> <span m='436413'>the</span> <span
  m='437076'>accuracy</span> <span m='437740'>of</span> <span
  m='438403'>our</span> <span m='439066'>model</span> <span m='439730'>is</span>
  <span m='440393'>about</span> <span m='441056'>84.8%.</span> </p><p><span
  m='441720'>We</span> <span m='441980'>need</span> <span m='442240'>to</span>
  <span m='442500'>compare</span> <span m='442760'>this</span> <span
  m='443020'>to</span> <span m='443280'>the</span> <span
  m='443540'>accuracy</span> <span m='443800'>of</span> <span
  m='444060'>a</span> <span m='444320'>simple</span> <span
  m='444580'>baseline</span> <span m='444840'>method.</span> </p><p><span
  m='446060'>The</span> <span m='446375'>more</span> <span
  m='446691'>frequent</span> <span m='447006'>outcome</span> <span
  m='447322'>in</span> <span m='447637'>this</span> <span m='447953'>case</span>
  <span m='448268'>is</span> <span m='448584'>0,</span> <span
  m='448900'>so</span> <span m='449425'>the</span> <span
  m='449950'>baseline</span> <span m='450476'>method</span> <span
  m='451001'>would</span> <span m='451527'>always</span> <span
  m='452052'>predict</span> <span m='452578'>0</span> <span m='453103'>or</span>
  <span m='453629'>no</span> <span m='454154'>CHD.</span> </p><p><span
  m='454680'>This</span> <span m='455303'>baseline</span> <span
  m='455926'>method</span> <span m='456550'>would</span> <span
  m='457173'>get</span> <span m='457796'>an</span> <span
  m='458420'>accuracy</span> <span m='459043'>of</span> <span
  m='459666'>1069</span> <span m='460290'>+</span> <span m='460873'>6--</span>
  <span m='461457'>this</span> <span m='462040'>is</span> <span
  m='462624'>the</span> <span m='463208'>total</span> <span
  m='463791'>number</span> <span m='464375'>of</span> <span
  m='464959'>true</span> <span m='465542'>negative</span> <span
  m='466126'>cases--</span> <span m='466710'>divided</span> <span
  m='467077'>by</span> <span m='467444'>the</span> <span m='467811'>total</span>
  <span m='468178'>number</span> <span m='468545'>of</span> <span
  m='468912'>observations</span> <span m='469279'>in</span> <span
  m='469646'>our</span> <span m='470013'>data</span> <span
  m='470380'>set,</span> <span m='471223'>1069</span> <span m='472067'>+</span>
  <span m='472911'>6</span> <span m='473755'>+</span> <span
  m='474598'>187</span> <span m='475442'>+</span> <span m='476286'>11.</span>
  </p><p><span m='477130'>So</span> <span m='477717'>the</span> <span
  m='478304'>baseline</span> <span m='478891'>model</span> <span
  m='479479'>would</span> <span m='480066'>get</span> <span m='480653'>an</span>
  <span m='481240'>accuracy</span> <span m='481828'>of</span> <span
  m='482415'>about</span> <span m='483002'>84.4%.</span> </p><p><span
  m='483590'>So</span> <span m='484020'>our</span> <span m='484451'>model</span>
  <span m='484882'>barely</span> <span m='485313'>beats</span> <span
  m='485744'>the</span> <span m='486175'>baseline</span> <span
  m='486606'>in</span> <span m='487037'>terms</span> <span m='487468'>of</span>
  <span m='487899'>accuracy.</span> </p><p><span m='488330'>But</span> <span
  m='488676'>do</span> <span m='489023'>we</span> <span m='489370'>still</span>
  <span m='489716'>have</span> <span m='490063'>a</span> <span
  m='490410'>valuable</span> <span m='490756'>model</span> <span
  m='491103'>by</span> <span m='491450'>varying</span> <span
  m='491796'>the</span> <span m='492143'>threshold?</span> </p><p><span
  m='492490'>Let's</span> <span m='493150'>compute</span> <span
  m='493810'>the</span> <span m='494470'>out-of-sample</span> <span
  m='495130'>AUC.</span> </p><p><span m='495790'>To</span> <span
  m='496320'>do</span> <span m='496851'>this,</span> <span m='497382'>we</span>
  <span m='497913'>first</span> <span m='498444'>need</span> <span
  m='498975'>to</span> <span m='499506'>load</span> <span m='500037'>the</span>
  <span m='500568'>ROCR</span> <span m='501099'>package.</span> </p><p><span
  m='501630'>And</span> <span m='501974'>then,</span> <span
  m='502318'>we'll</span> <span m='502662'>use</span> <span
  m='503007'>the</span> <span m='503351'>prediction</span> <span
  m='503695'>function</span> <span m='504040'>of</span> <span
  m='504573'>the</span> <span m='505107'>ROCR</span> <span
  m='505641'>package</span> <span m='506175'>to</span> <span
  m='506708'>make</span> <span m='507242'>our</span> <span
  m='507776'>predictions.</span> </p><p><span m='508310'>Let's</span> <span
  m='508776'>call</span> <span m='509242'>the</span> <span
  m='509709'>output</span> <span m='510175'>of</span> <span
  m='510641'>that</span> <span m='511108'>ROCRpred</span> <span
  m='511574'>and</span> <span m='512040'>use</span> <span m='512507'>the</span>
  <span m='512973'>prediction</span> <span m='513440'>function,</span> <span
  m='513875'>which</span> <span m='514311'>takes</span> <span
  m='514746'>as</span> <span m='515182'>a</span> <span m='515617'>first</span>
  <span m='516053'>argument</span> <span m='516488'>our</span> <span
  m='516924'>predictions,</span> <span m='517360'>predictTest,</span> <span
  m='517832'>and</span> <span m='518304'>then</span> <span m='518776'>as</span>
  <span m='519248'>a</span> <span m='519721'>second</span> <span
  m='520193'>argument</span> <span m='520665'>the</span> <span
  m='521137'>true</span> <span m='521610'>outcome,</span> <span
  m='522255'>test$TenYearCHD.</span> </p><p><span m='527530'>Then,</span> <span
  m='527940'>we</span> <span m='528350'>need</span> <span m='528760'>to</span>
  <span m='529170'>type</span> <span
  m='529580'>as.numeric(performance(ROCRpred,</span> <span
  m='529990'>"auc")@y.values).</span> </p><p><span m='553710'>This</span> <span
  m='554105'>will</span> <span m='554500'>give</span> <span m='554896'>us</span>
  <span m='555291'>the</span> <span m='555687'>AUC</span> <span
  m='556082'>value</span> <span m='556478'>on</span> <span m='556873'>our</span>
  <span m='557269'>testing</span> <span m='557664'>set.</span> </p><p><span
  m='558060'>So</span> <span m='558392'>we</span> <span m='558725'>have</span>
  <span m='559057'>an</span> <span m='559390'>AUC</span> <span
  m='559722'>of</span> <span m='560055'>about</span> <span m='560387'>74%</span>
  <span m='560720'>on</span> <span m='561052'>our</span> <span
  m='561385'>test</span> <span m='561717'>set,</span> <span
  m='562050'>which</span> <span m='562366'>means</span> <span
  m='562682'>that</span> <span m='562998'>the</span> <span
  m='563314'>model</span> <span m='563630'>can</span> <span
  m='563946'>differentiate</span> <span m='564262'>between</span> <span
  m='564578'>low</span> <span m='564894'>risk</span> <span
  m='565210'>patients</span> <span m='565752'>and</span> <span
  m='566295'>high</span> <span m='566838'>risk</span> <span
  m='567381'>patients</span> <span m='567924'>pretty</span> <span
  m='568467'>well.</span> </p><p><span m='569010'>As</span> <span
  m='569322'>we</span> <span m='569634'>saw</span> <span m='569946'>in</span>
  <span m='570259'>R,</span> <span m='570571'>we</span> <span
  m='570883'>were</span> <span m='571196'>able</span> <span m='571508'>to</span>
  <span m='571820'>build</span> <span m='572133'>a</span> <span
  m='572445'>logistic</span> <span m='572757'>regression</span> <span
  m='573070'>model</span> <span m='573645'>with</span> <span m='574220'>a</span>
  <span m='574795'>few</span> <span m='575370'>interesting</span> <span
  m='575945'>properties.</span> </p><p><span m='576520'>It</span> <span
  m='577135'>rarely</span> <span m='577750'>predicted</span> <span
  m='578365'>10-year</span> <span m='578980'>CHD</span> <span
  m='579595'>risk</span> <span m='580210'>above</span> <span
  m='580825'>50%.</span> </p><p><span m='581440'>So</span> <span
  m='581725'>the</span> <span m='582011'>accuracy</span> <span
  m='582297'>of</span> <span m='582583'>the</span> <span m='582869'>model</span>
  <span m='583155'>was</span> <span m='583440'>very</span> <span
  m='583726'>close</span> <span m='584012'>to</span> <span m='584298'>the</span>
  <span m='584584'>baseline</span> <span m='584870'>model.</span> </p><p><span
  m='586120'>However,</span> <span m='586541'>the</span> <span
  m='586962'>model</span> <span m='587383'>could</span> <span
  m='587805'>differentiate</span> <span m='588226'>between</span> <span
  m='588647'>low</span> <span m='589068'>risk</span> <span
  m='589490'>patients</span> <span m='589951'>and</span> <span
  m='590412'>high</span> <span m='590874'>risk</span> <span
  m='591335'>patients</span> <span m='591797'>pretty</span> <span
  m='592258'>well</span> <span m='592720'>with</span> <span m='593456'>an</span>
  <span m='594193'>out-of-sample</span> <span m='594930'>AUC</span> <span
  m='595666'>of</span> <span m='596403'>0.74.</span> </p><p><span
  m='597140'>Additionally,</span> <span m='597610'>some</span> <span
  m='598080'>of</span> <span m='598550'>the</span> <span
  m='599020'>significant</span> <span m='599490'>variables</span> <span
  m='599960'>suggest</span> <span m='600715'>possible</span> <span
  m='601470'>interventions</span> <span m='602225'>to</span> <span
  m='602980'>prevent</span> <span m='603735'>CHD.</span> </p><p><span
  m='604490'>We</span> <span m='604965'>saw</span> <span m='605440'>that</span>
  <span m='605915'>more</span> <span m='606390'>cigarettes</span> <span
  m='606865'>per</span> <span m='607340'>day,</span> <span
  m='607815'>higher</span> <span m='608290'>cholesterol,</span> <span
  m='608765'>higher</span> <span m='609240'>systolic</span> <span
  m='609762'>blood</span> <span m='610285'>pressure,</span> <span
  m='610808'>and</span> <span m='611331'>higher</span> <span
  m='611854'>glucose</span> <span m='612377'>levels</span> <span
  m='612900'>all</span> <span m='613760'>increased</span> <span
  m='614620'>risk.</span> </p><p><span m='615480'>Later</span> <span
  m='615816'>in</span> <span m='616153'>the</span> <span
  m='616490'>lecture,</span> <span m='616826'>we'll</span> <span
  m='617163'>discuss</span> <span m='617500'>some</span> <span
  m='617870'>medical</span> <span m='618240'>interventions</span> <span
  m='618610'>that</span> <span m='618980'>are</span> <span
  m='619350'>currently</span> <span m='619720'>used</span> <span
  m='620477'>to</span> <span m='621235'>prevent</span> <span
  m='621992'>CHD.</span> </p>
uid: 51e8cebadabc6b3afbd25374c0538f4b
type: course
layout: video
---
