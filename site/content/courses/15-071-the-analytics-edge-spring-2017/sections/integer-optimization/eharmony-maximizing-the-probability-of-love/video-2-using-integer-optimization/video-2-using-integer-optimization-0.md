---
about_this_resource_text: ''
embedded_media:
  - id: Video-YouTube-Stream
    media_location: AlDhA-NY5IA
    parent_uid: c489ba934eb3d8a1fd3d180a25962de5
    title: Video-YouTube-Stream
    type: Video
    uid: 6f3ce9cdd96129caf34b4ef2b205ec16
  - id: 3Play-3Play YouTube id-Stream
    media_location: AlDhA-NY5IA
    parent_uid: c489ba934eb3d8a1fd3d180a25962de5
    title: 3Play-3Play YouTube id
    type: 3Play
    uid: 96cb1b159101d77d321e781aa35c51ef
  - id: Thumbnail-YouTube-JPG_1
    media_location: 'https://img.youtube.com/vi/AlDhA-NY5IA/default.jpg'
    parent_uid: c489ba934eb3d8a1fd3d180a25962de5
    title: Thumbnail-YouTube-JPG
    type: Thumbnail
    uid: 09147ef72ae8882f0c69c7d428054030
  - id: AlDhA-NY5IA.srt
    parent_uid: c489ba934eb3d8a1fd3d180a25962de5
    technical_location: >-
      https://ocw.mit.edu/courses/sloan-school-of-management/15-071-the-analytics-edge-spring-2017/integer-optimization/eharmony-maximizing-the-probability-of-love/video-2-using-integer-optimization/video-2-using-integer-optimization-0/AlDhA-NY5IA.srt
    title: 3play caption file
    type: null
    uid: 00117eb369d6c8c7a4d6c24c1adade1d
  - id: AlDhA-NY5IA.pdf
    parent_uid: c489ba934eb3d8a1fd3d180a25962de5
    technical_location: >-
      https://ocw.mit.edu/courses/sloan-school-of-management/15-071-the-analytics-edge-spring-2017/integer-optimization/eharmony-maximizing-the-probability-of-love/video-2-using-integer-optimization/video-2-using-integer-optimization-0/AlDhA-NY5IA.pdf
    title: 3play pdf file
    type: null
    uid: c3fc573098632d4408ca24e81b04f544
  - id: Caption-3Play YouTube id-SRT
    parent_uid: c489ba934eb3d8a1fd3d180a25962de5
    title: Caption-3Play YouTube id-SRT-English - US
    type: Caption
    uid: e811b8c14260eefc604773455ecb6738
  - id: Transcript-3Play YouTube id-PDF
    parent_uid: c489ba934eb3d8a1fd3d180a25962de5
    title: Transcript-3Play YouTube id-PDF-English - US
    type: Transcript
    uid: bd94acc1acffd2a0f4ac4a755d08acb7
  - id: Video-InternetArchive-MP4
    media_location: >-
      https://archive.org/download/MIT15.071S17/MIT15_071S17_Session_9.3.03_300k.mp4
    parent_uid: c489ba934eb3d8a1fd3d180a25962de5
    title: Video-Internet Archive-MP4
    type: Video
    uid: 29a71ad6e11854780d05de5de7f89978
inline_embed_id: 80494035video2usingintegeroptimization39714503
order_index: 2142
parent_uid: 53b49e57bb91291ac131759296912fa6
related_resources_text: ''
short_url: video-2-using-integer-optimization-0
technical_location: >-
  https://ocw.mit.edu/courses/sloan-school-of-management/15-071-the-analytics-edge-spring-2017/integer-optimization/eharmony-maximizing-the-probability-of-love/video-2-using-integer-optimization/video-2-using-integer-optimization-0
title: 'Video 2: Using Integer Optimization'
transcript: >-
  <p><span m='9500'>Let</span> <span m='9810'>us</span> <span
  m='10120'>demonstrate</span> <span m='10430'>the</span> <span
  m='10740'>fundamentals</span> <span m='11050'>of</span> <span
  m='11458'>the</span> <span m='11867'>approach</span> <span
  m='12276'>that</span> <span m='12685'>is</span> <span m='13094'>called</span>
  <span m='13503'>integer</span> <span m='13912'>optimization</span> <span
  m='14321'>that</span> <span m='14730'>is</span> <span m='15187'>used</span>
  <span m='15644'>in</span> <span m='16101'>the</span> <span
  m='16558'>eHarmony</span> <span m='17015'>matching</span> <span
  m='17472'>algorithm.</span> </p><p><span m='17930'>Suppose</span> <span
  m='18311'>we</span> <span m='18692'>have</span> <span m='19073'>three</span>
  <span m='19455'>men</span> <span m='19836'>and</span> <span
  m='20217'>three</span> <span m='20598'>women.</span> </p><p><span
  m='24950'>Their</span> <span m='25380'>compatibility</span> <span
  m='25810'>scores</span> <span m='26240'>range</span> <span
  m='26670'>between</span> <span m='27100'>1</span> <span m='27530'>and</span>
  <span m='27960'>5</span> <span m='28390'>for</span> <span m='28820'>all</span>
  <span m='29250'>pairs,</span> <span m='29680'>and</span> <span
  m='29968'>they</span> <span m='30257'>are</span> <span m='30545'>shown</span>
  <span m='30834'>in</span> <span m='31122'>the</span> <span
  m='31411'>figure.</span> </p><p><span m='31700'>For</span> <span
  m='31978'>example,</span> <span m='32257'>the</span> <span
  m='32536'>first</span> <span m='32815'>man</span> <span m='33094'>and</span>
  <span m='33373'>the</span> <span m='33652'>first</span> <span
  m='33931'>woman</span> <span m='34210'>have</span> <span m='34608'>a</span>
  <span m='35006'>compatibility</span> <span m='35405'>score</span> <span
  m='35803'>of</span> <span m='36201'>1.</span> </p><p><span
  m='36600'>The</span> <span m='36842'>first</span> <span m='37085'>man</span>
  <span m='37328'>and</span> <span m='37571'>the</span> <span
  m='37814'>second</span> <span m='38057'>woman</span> <span
  m='38300'>have</span> <span m='38618'>a</span> <span
  m='38937'>compatibility</span> <span m='39256'>score</span> <span
  m='39575'>of</span> <span m='39894'>3,</span> <span m='40213'>and</span> <span
  m='40532'>so</span> <span m='40851'>forth.</span> </p><p><span
  m='44370'>So</span> <span m='44724'>how</span> <span m='45078'>should</span>
  <span m='45432'>we</span> <span m='45787'>match</span> <span
  m='46141'>pairs</span> <span m='46495'>together</span> <span
  m='46850'>to</span> <span m='47276'>maximize</span> <span
  m='47703'>compatibility?</span> </p><p><span m='51730'>The</span> <span
  m='52170'>red</span> <span m='52610'>line</span> <span
  m='53050'>indicates</span> <span m='53490'>a</span> <span
  m='53930'>match.</span> </p><p><span m='54370'>In</span> <span
  m='54635'>this</span> <span m='54900'>case</span> <span m='55166'>man</span>
  <span m='55431'>one</span> <span m='55697'>is</span> <span
  m='55962'>matched</span> <span m='56228'>to</span> <span m='56493'>the</span>
  <span m='56759'>third</span> <span m='57024'>woman</span> <span
  m='57290'>with</span> <span m='57720'>a</span> <span
  m='58150'>compatibility</span> <span m='58580'>score</span> <span
  m='59010'>of</span> <span m='59440'>5.</span> </p><p><span
  m='59870'>The</span> <span m='60177'>second</span> <span m='60484'>man</span>
  <span m='60791'>to</span> <span m='61098'>the</span> <span
  m='61405'>first</span> <span m='61712'>woman</span> <span
  m='62020'>with</span> <span m='62326'>a</span> <span
  m='62633'>compatibility</span> <span m='62940'>score</span> <span
  m='63246'>of</span> <span m='63553'>4.</span> </p><p><span
  m='63860'>And</span> <span m='64095'>the</span> <span m='64330'>third</span>
  <span m='64566'>man</span> <span m='64801'>to</span> <span
  m='65037'>the</span> <span m='65272'>second</span> <span
  m='65508'>woman</span> <span m='65743'>with</span> <span m='65979'>a</span>
  <span m='66214'>compatibility</span> <span m='66450'>score</span> <span
  m='66850'>of</span> <span m='67250'>5.</span> </p><p><span
  m='67650'>And</span> <span m='67967'>a</span> <span m='68284'>total</span>
  <span m='68601'>compatibility</span> <span m='68918'>score</span> <span
  m='69235'>of</span> <span m='69552'>14.</span> </p><p><span
  m='72740'>Let</span> <span m='73132'>us</span> <span m='73525'>now</span>
  <span m='73918'>formulate</span> <span m='74311'>this</span> <span
  m='74704'>matching</span> <span m='75097'>problem</span> <span
  m='75490'>in</span> <span m='76068'>the</span> <span m='76646'>language</span>
  <span m='77225'>of</span> <span m='77803'>integer</span> <span
  m='78381'>optimization.</span> </p><p><span m='78960'>We</span> <span
  m='79505'>denote</span> <span m='80050'>the</span> <span m='80595'>data</span>
  <span m='81140'>for</span> <span m='81685'>the</span> <span
  m='82230'>matching</span> <span m='82775'>problem</span> <span
  m='83320'>as</span> <span m='83865'>w_ij.</span> </p><p><span
  m='84410'>These</span> <span m='84876'>numbers</span> <span
  m='85343'>represent</span> <span m='85810'>the</span> <span
  m='86276'>compatibility</span> <span m='86743'>score</span> <span
  m='87210'>between</span> <span m='87803'>user</span> <span m='88396'>i</span>
  <span m='88990'>and</span> <span m='89583'>user</span> <span
  m='90176'>j.</span> </p><p><span m='90770'>In</span> <span
  m='91460'>the</span> <span m='92150'>example</span> <span
  m='92840'>shown</span> <span m='93530'>in</span> <span m='94220'>the</span>
  <span m='94910'>figure,</span> <span m='95600'>w_13</span> <span
  m='96290'>is</span> <span m='96980'>5.</span> </p><p><span m='97670'>We</span>
  <span m='98388'>first</span> <span m='99106'>define</span> <span
  m='99824'>decision</span> <span m='100542'>variables</span> <span
  m='101260'>x_ij.</span> </p><p><span m='101979'>These</span> <span
  m='102293'>are</span> <span m='102607'>binary</span> <span
  m='102921'>variables</span> <span m='103235'>taking</span> <span
  m='103550'>value</span> <span m='103922'>1</span> <span m='104294'>if</span>
  <span m='104666'>we</span> <span m='105038'>match</span> <span
  m='105410'>user</span> <span m='105782'>i</span> <span m='106154'>and</span>
  <span m='106526'>user</span> <span m='106898'>j</span> <span
  m='107270'>together,</span> <span m='107642'>and</span> <span
  m='108014'>value</span> <span m='108386'>0</span> <span
  m='108759'>otherwise.</span> </p><p><span m='110950'>We</span> <span
  m='111355'>next</span> <span m='111760'>define</span> <span
  m='112165'>the</span> <span m='112570'>objective</span> <span
  m='112975'>function,</span> <span m='113380'>which</span> <span
  m='113812'>is</span> <span m='114245'>to</span> <span
  m='114678'>maximize</span> <span m='115111'>compatibility</span> <span
  m='115544'>between</span> <span m='115977'>matches.</span> </p><p><span
  m='116410'>In</span> <span m='116966'>this</span> <span
  m='117522'>case,</span> <span m='118078'>we</span> <span
  m='118634'>maximize</span> <span m='119190'>the</span> <span
  m='119746'>sum</span> <span m='120302'>of</span> <span
  m='120858'>(w_11*x_11)</span> <span m='121414'>+</span> <span
  m='121970'>(w_12*x_12)</span> <span m='122460'>and</span> <span
  m='122950'>so</span> <span m='123440'>forth,</span> <span m='123930'>up</span>
  <span m='124420'>to</span> <span m='124910'>(w_33*x_33).</span> </p><p><span
  m='128960'>We</span> <span m='129356'>next</span> <span
  m='129753'>define</span> <span m='130150'>the</span> <span
  m='130546'>constraints</span> <span m='130943'>for</span> <span
  m='131340'>the</span> <span m='131736'>decision</span> <span
  m='132133'>variables</span> <span m='132530'>x_ij.</span> </p><p><span
  m='134420'>Each</span> <span m='134893'>man--</span> <span
  m='135367'>say,</span> <span m='135840'>man</span> <span m='136314'>one</span>
  <span m='136788'>--should</span> <span m='137261'>match</span> <span
  m='137735'>to</span> <span m='138209'>exactly</span> <span
  m='138682'>one</span> <span m='139156'>woman.</span> </p><p><span
  m='139630'>And</span> <span m='140183'>we</span> <span
  m='140737'>represent</span> <span m='141291'>this</span> <span
  m='141845'>by</span> <span m='142398'>the</span> <span
  m='142952'>mathematical</span> <span m='143506'>constraint</span> <span
  m='144060'>as</span> <span m='144584'>follows--</span> <span
  m='145108'>x_11</span> <span m='145633'>+</span> <span m='146157'>x_12</span>
  <span m='146682'>+</span> <span m='147206'>x_13</span> <span
  m='147731'>=</span> <span m='148255'>1.</span> </p><p><span
  m='148780'>Similarly,</span> <span m='149526'>each</span> <span
  m='150273'>woman--</span> <span m='151020'>say,</span> <span
  m='151766'>woman</span> <span m='152513'>one</span> <span
  m='153260'>--should</span> <span m='153676'>match</span> <span
  m='154093'>to</span> <span m='154510'>exactly</span> <span
  m='154926'>one</span> <span m='155343'>man.</span> </p><p><span
  m='155760'>And</span> <span m='156229'>we</span> <span
  m='156699'>represent</span> <span m='157169'>this</span> <span
  m='157639'>constraint</span> <span m='158109'>mathematically</span> <span
  m='158579'>as</span> <span m='159360'>x_11</span> <span m='160141'>+</span>
  <span m='160922'>x_21</span> <span m='161704'>+</span> <span
  m='162485'>x_31</span> <span m='163266'>=</span> <span m='164047'>1.</span>
  </p><p><span m='164829'>The</span> <span m='165576'>full</span> <span
  m='166323'>optimization</span> <span m='167070'>problem</span> <span
  m='167818'>is</span> <span m='168565'>indicated</span> <span
  m='169312'>next.</span> </p><p><span m='170060'>First</span> <span
  m='170566'>we</span> <span m='171073'>have</span> <span m='171580'>the</span>
  <span m='172086'>objective</span> <span m='172593'>function</span> <span
  m='173100'>we</span> <span m='173606'>indicated</span> <span
  m='174113'>earlier.</span> </p><p><span m='174620'>Next</span> <span
  m='174958'>we</span> <span m='175297'>have</span> <span m='175635'>the</span>
  <span m='175974'>set</span> <span m='176312'>of</span> <span
  m='176651'>constraints</span> <span m='176990'>that</span> <span
  m='177357'>indicate</span> <span m='177724'>that</span> <span
  m='178091'>every</span> <span m='178458'>man</span> <span
  m='178825'>should</span> <span m='179192'>match</span> <span
  m='179559'>with</span> <span m='179926'>exactly</span> <span
  m='180293'>one</span> <span m='180660'>woman.</span> </p><p><span
  m='181650'>Next</span> <span m='182090'>we</span> <span m='182530'>have</span>
  <span m='182970'>the</span> <span m='183410'>constraints</span> <span
  m='183850'>that</span> <span m='184290'>every</span> <span
  m='184730'>woman</span> <span m='185170'>should</span> <span
  m='185408'>match</span> <span m='185646'>with</span> <span
  m='185884'>one</span> <span m='186122'>man.</span> </p><p><span
  m='186360'>And</span> <span m='187067'>finally</span> <span
  m='187774'>that</span> <span m='188481'>the</span> <span
  m='189188'>variables</span> <span m='189895'>are</span> <span
  m='190602'>binary.</span> </p><p><span m='191310'>Let</span> <span
  m='191807'>us</span> <span m='192305'>now</span> <span
  m='192803'>extend</span> <span m='193301'>the</span> <span
  m='193798'>methodology</span> <span m='194296'>to</span> <span
  m='194794'>other</span> <span m='195292'>areas.</span> </p><p><span
  m='195790'>Suppose,</span> <span m='196065'>for</span> <span
  m='196340'>example,</span> <span m='196615'>we</span> <span
  m='196890'>want</span> <span m='197165'>to</span> <span m='197440'>show</span>
  <span m='197715'>each</span> <span m='197990'>woman</span> <span
  m='198265'>her</span> <span m='198540'>top</span> <span m='198815'>two</span>
  <span m='199090'>matches.</span> </p><p><span m='200170'>This</span> <span
  m='200638'>is</span> <span m='201107'>represented</span> <span
  m='201575'>by</span> <span m='202044'>the</span> <span
  m='202512'>constraint</span> <span m='202981'>x_11</span> <span
  m='203450'>+</span> <span m='204171'>x_21</span> <span m='204893'>+</span>
  <span m='205615'>x_31</span> <span m='206336'>=</span> <span
  m='207058'>2.</span> </p>
uid: c489ba934eb3d8a1fd3d180a25962de5
type: courses
layout: video
---
