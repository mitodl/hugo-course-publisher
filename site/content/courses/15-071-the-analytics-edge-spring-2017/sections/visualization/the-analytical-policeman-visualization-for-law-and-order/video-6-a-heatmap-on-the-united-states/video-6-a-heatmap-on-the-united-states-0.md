---
about_this_resource_text: ''
embedded_media:
  - id: Video-YouTube-Stream
    media_location: 8hBr-bpykso
    parent_uid: 043fc419195005dd6080e3330724c725
    title: Video-YouTube-Stream
    type: Video
    uid: aacec831aeeecea17a84b639c7dec7ed
  - id: 3Play-3Play YouTube id-Stream
    media_location: 8hBr-bpykso
    parent_uid: 043fc419195005dd6080e3330724c725
    title: 3Play-3Play YouTube id
    type: 3Play
    uid: da0ae23b03abcd00bd12356d82fe5f37
  - id: Thumbnail-YouTube-JPG
    media_location: 'https://img.youtube.com/vi/8hBr-bpykso/default.jpg'
    parent_uid: 043fc419195005dd6080e3330724c725
    title: Thumbnail-YouTube-JPG
    type: Thumbnail
    uid: b26c08f714e29376c71895a9cf42eac1
  - id: 8hBr-bpykso.srt
    parent_uid: 043fc419195005dd6080e3330724c725
    technical_location: >-
      https://ocw.mit.edu/courses/sloan-school-of-management/15-071-the-analytics-edge-spring-2017/visualization/the-analytical-policeman-visualization-for-law-and-order/video-6-a-heatmap-on-the-united-states/video-6-a-heatmap-on-the-united-states-0/8hBr-bpykso.srt
    title: 3play caption file
    type: null
    uid: e61896d97a3a9b634162d31321ae919f
  - id: 8hBr-bpykso.pdf
    parent_uid: 043fc419195005dd6080e3330724c725
    technical_location: >-
      https://ocw.mit.edu/courses/sloan-school-of-management/15-071-the-analytics-edge-spring-2017/visualization/the-analytical-policeman-visualization-for-law-and-order/video-6-a-heatmap-on-the-united-states/video-6-a-heatmap-on-the-united-states-0/8hBr-bpykso.pdf
    title: 3play pdf file
    type: null
    uid: 176e1a1b68db209bb290c5b0f5fcf731
  - id: Caption-3Play YouTube id-SRT
    parent_uid: 043fc419195005dd6080e3330724c725
    title: Caption-3Play YouTube id-SRT-English - US
    type: Caption
    uid: 63843a3393c5fe320f29a597e752f033
  - id: Transcript-3Play YouTube id-PDF
    parent_uid: 043fc419195005dd6080e3330724c725
    title: Transcript-3Play YouTube id-PDF-English - US
    type: Transcript
    uid: 7714caf30450d9ac976ab285f679d416
  - id: Video-InternetArchive-MP4
    media_location: >-
      https://archive.org/download/MIT15.071S17/MIT15_071S17_Session_7.3.11_300k.mp4
    parent_uid: 043fc419195005dd6080e3330724c725
    title: Video-Internet Archive-MP4
    type: Video
    uid: a3331f03df3ac7079b255673f5386920
inline_embed_id: 67499248video6aheatmapontheunitedstates10526483
order_index: 1673
parent_uid: 50eab6cd164e035d9470dc118924f686
related_resources_text: ''
short_url: video-6-a-heatmap-on-the-united-states-0
technical_location: >-
  https://ocw.mit.edu/courses/sloan-school-of-management/15-071-the-analytics-edge-spring-2017/visualization/the-analytical-policeman-visualization-for-law-and-order/video-6-a-heatmap-on-the-united-states/video-6-a-heatmap-on-the-united-states-0
title: 'Video 6: A Heatmap on the United States'
transcript: >-
  <p><span m='4490'>In</span> <span m='4792'>this</span> <span
  m='5095'>video,</span> <span m='5397'>we'll</span> <span
  m='5700'>create</span> <span m='6002'>a</span> <span m='6305'>heat</span>
  <span m='6607'>map</span> <span m='6910'>on</span> <span m='7307'>a</span>
  <span m='7704'>map</span> <span m='8101'>of</span> <span m='8498'>the</span>
  <span m='8895'>United</span> <span m='9292'>States.</span> </p><p><span
  m='9690'>We'll</span> <span m='10198'>be</span> <span m='10707'>using</span>
  <span m='11216'>the</span> <span m='11725'>data</span> <span
  m='12233'>set</span> <span m='12742'>murders.csv,</span> <span
  m='13251'>which</span> <span m='13760'>is</span> <span m='14145'>data</span>
  <span m='14531'>provided</span> <span m='14917'>by</span> <span
  m='15302'>the</span> <span m='15688'>FBI</span> <span m='16074'>giving</span>
  <span m='16460'>the</span> <span m='16880'>total</span> <span
  m='17300'>number</span> <span m='17720'>of</span> <span
  m='18140'>murders</span> <span m='18560'>in</span> <span m='18980'>the</span>
  <span m='19400'>United</span> <span m='19820'>States</span> <span
  m='20240'>by</span> <span m='20660'>state.</span> </p><p><span
  m='21080'>Let's</span> <span m='21410'>start</span> <span m='21740'>by</span>
  <span m='22070'>reading</span> <span m='22400'>in</span> <span
  m='22730'>our</span> <span m='23060'>data</span> <span m='23390'>set.</span>
  </p><p><span m='23720'>We'll</span> <span m='24450'>call</span> <span
  m='25180'>it</span> <span m='25910'>murders,</span> <span m='26640'>and</span>
  <span m='27370'>we'll</span> <span m='28100'>use</span> <span
  m='28830'>the</span> <span m='29560'>read.csv</span> <span
  m='30290'>function</span> <span m='31020'>to</span> <span
  m='31362'>read</span> <span m='31705'>in</span> <span m='32048'>the</span>
  <span m='32391'>data</span> <span m='32734'>file</span> <span
  m='33077'>murders.csv.</span> </p><p><span m='36610'>Let's</span> <span
  m='36896'>take</span> <span m='37182'>a</span> <span m='37468'>look</span>
  <span m='37754'>at</span> <span m='38040'>the</span> <span
  m='38326'>structure</span> <span m='38612'>of</span> <span
  m='38898'>this</span> <span m='39184'>data</span> <span m='39470'>using</span>
  <span m='40252'>the</span> <span m='41035'>str</span> <span
  m='41817'>function.</span> </p><p><span m='42600'>We</span> <span
  m='43038'>have</span> <span m='43477'>51</span> <span
  m='43916'>observations</span> <span m='44355'>for</span> <span
  m='44793'>the</span> <span m='45232'>50</span> <span m='45671'>states</span>
  <span m='46110'>plus</span> <span m='46731'>Washington,</span> <span
  m='47352'>DC,</span> <span m='47974'>and</span> <span m='48595'>six</span>
  <span m='49217'>different</span> <span m='49838'>variables:</span> <span
  m='50460'>the</span> <span m='50907'>name</span> <span m='51355'>of</span>
  <span m='51803'>the</span> <span m='52251'>state,</span> <span
  m='52698'>the</span> <span m='53146'>population,</span> <span
  m='53594'>the</span> <span m='54042'>population</span> <span
  m='54490'>density,</span> <span m='54997'>the</span> <span
  m='55504'>number</span> <span m='56011'>of</span> <span
  m='56518'>murders,</span> <span m='57025'>the</span> <span
  m='57532'>number</span> <span m='58040'>of</span> <span
  m='58511'>murders</span> <span m='58983'>that</span> <span
  m='59455'>used</span> <span m='59927'>guns,</span> <span m='60399'>and</span>
  <span m='60870'>the</span> <span m='61342'>rate</span> <span
  m='61814'>of</span> <span m='62286'>gun</span> <span
  m='62758'>ownership.</span> </p><p><span m='63230'>A</span> <span
  m='63583'>map</span> <span m='63937'>of</span> <span m='64291'>the</span>
  <span m='64645'>United</span> <span m='64998'>States</span> <span
  m='65352'>is</span> <span m='65706'>included</span> <span m='66060'>in</span>
  <span m='66726'>R.</span> <span m='67392'>Let's</span> <span
  m='68058'>load</span> <span m='68724'>the</span> <span m='69390'>map</span>
  <span m='70056'>and</span> <span m='70722'>call</span> <span
  m='71388'>it</span> <span m='72054'>statesMap.</span> </p><p><span
  m='72720'>We</span> <span m='73425'>can</span> <span m='74130'>do</span> <span
  m='74835'>so</span> <span m='75540'>using</span> <span m='76245'>the</span>
  <span m='76950'>map_data</span> <span m='77655'>function,</span> <span
  m='78360'>where</span> <span m='79113'>the</span> <span m='79867'>only</span>
  <span m='80621'>argument</span> <span m='81375'>is</span> <span
  m='82128'>"state"</span> <span m='82882'>in</span> <span
  m='83636'>quotes.</span> </p><p><span m='84390'>Let's</span> <span
  m='84653'>see</span> <span m='84916'>what</span> <span m='85179'>this</span>
  <span m='85442'>looks</span> <span m='85705'>like</span> <span
  m='85968'>by</span> <span m='86231'>typing</span> <span m='86494'>in</span>
  <span m='86757'>str(statesMap).</span> </p><p><span m='92930'>This</span>
  <span m='93261'>is</span> <span m='93592'>just</span> <span m='93924'>a</span>
  <span m='94255'>data</span> <span m='94587'>frame</span> <span
  m='94918'>summarizing</span> <span m='95250'>how</span> <span
  m='95680'>to</span> <span m='96110'>draw</span> <span m='96540'>the</span>
  <span m='96970'>United</span> <span m='97400'>States.</span> </p><p><span
  m='97830'>To</span> <span m='98342'>plot</span> <span m='98855'>the</span>
  <span m='99368'>map,</span> <span m='99880'>we'll</span> <span
  m='100393'>use</span> <span m='100906'>the</span> <span
  m='101419'>polygons</span> <span m='101931'>geometry</span> <span
  m='102444'>of</span> <span m='102957'>ggplot.</span> </p><p><span
  m='103470'>So</span> <span m='104026'>type</span> <span
  m='104583'>ggplot,</span> <span m='105140'>and</span> <span
  m='105697'>then</span> <span m='106254'>in</span> <span
  m='106811'>parentheses,</span> <span m='107368'>our</span> <span
  m='107925'>data</span> <span m='108482'>frame</span> <span
  m='109039'>is</span> <span m='109635'>statesMap,</span> <span
  m='110231'>and</span> <span m='110827'>then</span> <span m='111423'>our</span>
  <span m='112019'>aesthetic</span> <span m='112615'>is</span> <span
  m='113211'>x</span> <span m='113807'>=</span> <span m='114403'>long,</span>
  <span m='115000'>the</span> <span m='115593'>longitude</span> <span
  m='116187'>variable</span> <span m='116781'>in</span> <span
  m='117375'>statesMap,</span> <span m='117968'>y</span> <span
  m='118562'>=</span> <span m='119156'>lat,</span> <span m='119750'>the</span>
  <span m='120363'>latitude</span> <span m='120977'>variable,</span> <span
  m='121591'>and</span> <span m='122205'>then</span> <span
  m='122818'>group</span> <span m='123432'>=</span> <span
  m='124046'>group.</span> </p><p><span m='124660'>This</span> <span
  m='124981'>is</span> <span m='125303'>the</span> <span
  m='125625'>variable</span> <span m='125946'>defining</span> <span
  m='126268'>how</span> <span m='126590'>to</span> <span m='127055'>draw</span>
  <span m='127521'>the</span> <span m='127986'>United</span> <span
  m='128452'>States</span> <span m='128917'>into</span> <span
  m='129383'>groups</span> <span m='129848'>by</span> <span
  m='130314'>state.</span> </p><p><span m='130780'>Then</span> <span
  m='131318'>close</span> <span m='131856'>both</span> <span
  m='132394'>parentheses</span> <span m='132932'>here,</span> <span
  m='133470'>and</span> <span m='134101'>we'll</span> <span
  m='134732'>add</span> <span m='135363'>geom_polygon</span> <span
  m='135994'>where</span> <span m='136625'>our</span> <span
  m='137256'>arguments</span> <span m='137887'>here</span> <span
  m='138518'>will</span> <span m='139149'>be</span> <span
  m='139780'>fill="white"--</span> <span m='140483'>we'll</span> <span
  m='141187'>just</span> <span m='141891'>fill</span> <span
  m='142595'>all</span> <span m='143298'>states</span> <span
  m='144002'>in</span> <span m='144706'>white--</span> <span
  m='145410'>and</span> <span m='146227'>color="black"</span> <span
  m='147045'>to</span> <span m='147862'>outline</span> <span
  m='148680'>the</span> <span m='149497'>states</span> <span
  m='150315'>in</span> <span m='151132'>black.</span> </p><p><span
  m='151950'>Now</span> <span m='152258'>in</span> <span m='152567'>your</span>
  <span m='152875'>R</span> <span m='153184'>graphics</span> <span
  m='153492'>window,</span> <span m='153801'>you</span> <span
  m='154110'>should</span> <span m='154570'>see</span> <span m='155030'>a</span>
  <span m='155490'>map</span> <span m='155950'>of</span> <span
  m='156410'>the</span> <span m='156870'>United</span> <span
  m='157330'>States.</span> </p><p><span m='157790'>Before</span> <span
  m='158091'>we</span> <span m='158392'>can</span> <span m='158693'>plot</span>
  <span m='158994'>our</span> <span m='159295'>data</span> <span
  m='159596'>on</span> <span m='159897'>this</span> <span m='160198'>map,</span>
  <span m='160500'>we</span> <span m='160713'>need</span> <span
  m='160926'>to</span> <span m='161139'>make</span> <span m='161352'>sure</span>
  <span m='161565'>that</span> <span m='161778'>the</span> <span
  m='161991'>state</span> <span m='162204'>names</span> <span
  m='162417'>are</span> <span m='162630'>the</span> <span m='163058'>same</span>
  <span m='163487'>in</span> <span m='163915'>the</span> <span
  m='164344'>murders</span> <span m='164772'>data</span> <span
  m='165201'>frame</span> <span m='165630'>and</span> <span m='166161'>in</span>
  <span m='166693'>the</span> <span m='167225'>statesMap</span> <span
  m='167756'>data</span> <span m='168288'>frame.</span> </p><p><span
  m='168820'>In</span> <span m='169151'>the</span> <span
  m='169482'>murders</span> <span m='169813'>data</span> <span
  m='170145'>frame,</span> <span m='170476'>our</span> <span
  m='170807'>state</span> <span m='171138'>names</span> <span
  m='171470'>are</span> <span m='171758'>in</span> <span m='172047'>the</span>
  <span m='172335'>State</span> <span m='172624'>variable,</span> <span
  m='172912'>and</span> <span m='173201'>they</span> <span
  m='173490'>start</span> <span m='173894'>with</span> <span m='174298'>a</span>
  <span m='174702'>capital</span> <span m='175106'>letter.</span> </p><p><span
  m='175510'>But</span> <span m='175846'>in</span> <span m='176183'>the</span>
  <span m='176520'>statesMap</span> <span m='176856'>data</span> <span
  m='177193'>frame,</span> <span m='177530'>our</span> <span
  m='177866'>state</span> <span m='178203'>names</span> <span
  m='178540'>are</span> <span m='178985'>in</span> <span m='179431'>the</span>
  <span m='179876'>region</span> <span m='180322'>variable,</span> <span
  m='180767'>and</span> <span m='181213'>they're</span> <span
  m='181658'>all</span> <span m='182104'>lowercase.</span> </p><p><span
  m='182550'>So</span> <span m='182956'>let's</span> <span
  m='183362'>create</span> <span m='183769'>a</span> <span m='184175'>new</span>
  <span m='184581'>variable</span> <span m='184988'>called</span> <span
  m='185394'>region</span> <span m='185800'>in</span> <span
  m='186207'>our</span> <span m='186613'>murders</span> <span
  m='187020'>data</span> <span m='187386'>frame</span> <span
  m='187752'>to</span> <span m='188119'>match</span> <span m='188485'>the</span>
  <span m='188851'>state</span> <span m='189218'>name</span> <span
  m='189584'>variable</span> <span m='189950'>in</span> <span
  m='190317'>the</span> <span m='190683'>statesMap</span> <span
  m='191050'>data</span> <span m='191815'>frame.</span> </p><p><span
  m='192580'>So</span> <span m='193107'>we'll</span> <span m='193634'>add</span>
  <span m='194161'>to</span> <span m='194689'>our</span> <span
  m='195216'>murders</span> <span m='195743'>data</span> <span
  m='196270'>frame</span> <span m='196798'>the</span> <span
  m='197325'>variable</span> <span m='197852'>region,</span> <span
  m='198380'>which</span> <span m='198832'>will</span> <span
  m='199285'>be</span> <span m='199737'>equal</span> <span m='200190'>to</span>
  <span m='200642'>the</span> <span m='201095'>lowercase</span> <span
  m='201547'>version--</span> <span m='202000'>using</span> <span
  m='202309'>the</span> <span m='202618'>tolower</span> <span
  m='202927'>function</span> <span m='203236'>that</span> <span
  m='203545'>we</span> <span m='203854'>used</span> <span m='204163'>in</span>
  <span m='204472'>the</span> <span m='204781'>text</span> <span
  m='205090'>analytics</span> <span m='205400'>lectures--</span> <span
  m='205960'>and</span> <span m='206520'>the</span> <span
  m='207080'>argument</span> <span m='207640'>will</span> <span
  m='208200'>be</span> <span m='208760'>murders$State.</span> </p><p><span
  m='214820'>This</span> <span m='215151'>will</span> <span
  m='215482'>just</span> <span m='215814'>convert</span> <span
  m='216145'>the</span> <span m='216477'>State</span> <span
  m='216808'>variable</span> <span m='217140'>to</span> <span
  m='217540'>all</span> <span m='217940'>lowercase</span> <span
  m='218340'>letters</span> <span m='218740'>and</span> <span
  m='219140'>store</span> <span m='219540'>it</span> <span m='219940'>as</span>
  <span m='220486'>a</span> <span m='221033'>new</span> <span
  m='221580'>variable</span> <span m='222126'>called</span> <span
  m='222673'>region.</span> </p><p><span m='223220'>Now</span> <span
  m='223570'>we</span> <span m='223920'>can</span> <span m='224270'>join</span>
  <span m='224620'>the</span> <span m='224970'>statesMap</span> <span
  m='225320'>data</span> <span m='225670'>frame</span> <span
  m='226020'>with</span> <span m='226370'>the</span> <span
  m='226720'>murders</span> <span m='227070'>data</span> <span
  m='227493'>frame</span> <span m='227917'>by</span> <span
  m='228341'>using</span> <span m='228765'>the</span> <span
  m='229188'>merge</span> <span m='229612'>function,</span> <span
  m='230036'>which</span> <span m='230460'>matches</span> <span
  m='230870'>rows</span> <span m='231280'>of</span> <span m='231690'>a</span>
  <span m='232100'>data</span> <span m='232510'>frame</span> <span
  m='232920'>based</span> <span m='233330'>on</span> <span m='233740'>a</span>
  <span m='234150'>shared</span> <span m='234560'>identifier.</span>
  </p><p><span m='234970'>We</span> <span m='235361'>just</span> <span
  m='235753'>defined</span> <span m='236145'>the</span> <span
  m='236536'>variable</span> <span m='236928'>region,</span> <span
  m='237320'>which</span> <span m='237790'>exists</span> <span
  m='238260'>in</span> <span m='238730'>both</span> <span m='239200'>data</span>
  <span m='239670'>frames.</span> </p><p><span m='240140'>So</span> <span
  m='240945'>we'll</span> <span m='241750'>call</span> <span
  m='242555'>our</span> <span m='243360'>new</span> <span m='244165'>data</span>
  <span m='244970'>frame</span> <span m='245775'>murderMap,</span> <span
  m='246580'>and</span> <span m='246948'>we'll</span> <span
  m='247316'>use</span> <span m='247685'>the</span> <span
  m='248053'>merge</span> <span m='248421'>function,</span> <span
  m='248790'>where</span> <span m='249354'>the</span> <span
  m='249918'>first</span> <span m='250482'>argument</span> <span
  m='251046'>is</span> <span m='251610'>our</span> <span m='252174'>first</span>
  <span m='252738'>data</span> <span m='253302'>frame,</span> <span
  m='253866'>statesMap,</span> <span m='254430'>the</span> <span
  m='254942'>second</span> <span m='255454'>argument</span> <span
  m='255966'>is</span> <span m='256478'>our</span> <span
  m='256991'>second</span> <span m='257503'>data</span> <span
  m='258015'>frame,</span> <span m='258527'>murders,</span> <span
  m='259040'>and</span> <span m='259768'>the</span> <span
  m='260496'>third</span> <span m='261225'>argument</span> <span
  m='261953'>is</span> <span m='262681'>by="region".</span> </p><p><span
  m='263410'>This</span> <span m='263826'>is</span> <span m='264242'>the</span>
  <span m='264658'>identifier</span> <span m='265074'>to</span> <span
  m='265490'>use</span> <span m='265906'>to</span> <span m='266322'>merge</span>
  <span m='266738'>the</span> <span m='267154'>rows.</span> </p><p><span
  m='267570'>Let's</span> <span m='267768'>take</span> <span m='267967'>a</span>
  <span m='268166'>look</span> <span m='268365'>at</span> <span
  m='268563'>the</span> <span m='268762'>data</span> <span
  m='268961'>frame</span> <span m='269160'>we</span> <span
  m='269545'>just</span> <span m='269931'>created</span> <span
  m='270317'>using</span> <span m='270702'>the</span> <span
  m='271088'>str</span> <span m='271474'>function.</span> </p><p><span
  m='274580'>We</span> <span m='274888'>have</span> <span m='275197'>the</span>
  <span m='275505'>same</span> <span m='275814'>number</span> <span
  m='276122'>of</span> <span m='276431'>observations</span> <span
  m='276740'>here</span> <span m='277045'>that</span> <span m='277351'>we</span>
  <span m='277656'>had</span> <span m='277962'>in</span> <span
  m='278267'>the</span> <span m='278573'>statesMap</span> <span
  m='278878'>data</span> <span m='279184'>frame,</span> <span
  m='279490'>but</span> <span m='279816'>now</span> <span m='280142'>we</span>
  <span m='280468'>have</span> <span m='280794'>both</span> <span
  m='281120'>the</span> <span m='281446'>variables</span> <span
  m='281772'>from</span> <span m='282098'>the</span> <span
  m='282424'>statesMap</span> <span m='282750'>data</span> <span
  m='283122'>frame</span> <span m='283494'>and</span> <span
  m='283866'>the</span> <span m='284238'>variables</span> <span
  m='284611'>from</span> <span m='284983'>the</span> <span
  m='285355'>murders</span> <span m='285727'>data</span> <span
  m='286100'>frame,</span> <span m='286544'>which</span> <span
  m='286988'>were</span> <span m='287432'>matched</span> <span
  m='287876'>up</span> <span m='288320'>based</span> <span m='288764'>on</span>
  <span m='289208'>the</span> <span m='289652'>region</span> <span
  m='290096'>variable.</span> </p><p><span m='290540'>So</span> <span
  m='290870'>now,</span> <span m='291200'>let's</span> <span
  m='291530'>plot</span> <span m='291860'>the</span> <span
  m='292190'>number</span> <span m='292520'>of</span> <span
  m='292850'>murders</span> <span m='293180'>on</span> <span
  m='293542'>our</span> <span m='293905'>map</span> <span m='294268'>of</span>
  <span m='294631'>the</span> <span m='294994'>United</span> <span
  m='295357'>States.</span> </p><p><span m='295720'>We'll</span> <span
  m='296181'>again</span> <span m='296642'>use</span> <span
  m='297103'>the</span> <span m='297564'>ggplot</span> <span
  m='298025'>function,</span> <span m='298486'>but</span> <span
  m='298947'>this</span> <span m='299408'>time,</span> <span
  m='299870'>our</span> <span m='300429'>data</span> <span
  m='300988'>frame</span> <span m='301547'>is</span> <span
  m='302106'>murderMap,</span> <span m='302665'>and</span> <span
  m='303224'>in</span> <span m='303783'>our</span> <span
  m='304342'>aesthetic</span> <span m='304901'>we</span> <span
  m='305460'>want</span> <span m='306020'>to</span> <span
  m='307237'>again</span> <span m='308454'>say</span> <span
  m='309671'>x=long,</span> <span m='310888'>y=lat,</span> <span
  m='312105'>and</span> <span m='313322'>group=group,</span> <span
  m='314540'>but</span> <span m='314816'>we'll</span> <span
  m='315092'>add</span> <span m='315368'>one</span> <span m='315645'>more</span>
  <span m='315921'>argument</span> <span m='316197'>this</span> <span
  m='316473'>time,</span> <span m='316750'>which</span> <span
  m='317312'>is</span> <span m='317874'>fill=Murders</span> <span
  m='318436'>so</span> <span m='318998'>that</span> <span m='319560'>the</span>
  <span m='320122'>states</span> <span m='320684'>will</span> <span
  m='321246'>be</span> <span m='321808'>colored</span> <span
  m='322370'>according</span> <span m='322902'>to</span> <span
  m='323434'>the</span> <span m='323966'>Murders</span> <span
  m='324498'>variable.</span> </p><p><span m='325030'>Then</span> <span
  m='325558'>we</span> <span m='326086'>need</span> <span m='326614'>to</span>
  <span m='327142'>add</span> <span m='327670'>the</span> <span
  m='328199'>polygon</span> <span m='328727'>geometry</span> <span
  m='329255'>where</span> <span m='329783'>the</span> <span
  m='330311'>only</span> <span m='330840'>argument</span> <span
  m='331453'>here</span> <span m='332067'>will</span> <span m='332681'>be</span>
  <span m='333295'>color="black"</span> <span m='333909'>to</span> <span
  m='334405'>outline</span> <span m='334901'>the</span> <span
  m='335398'>states</span> <span m='335894'>in</span> <span
  m='336390'>black,</span> <span m='336887'>like</span> <span
  m='337383'>before.</span> </p><p><span m='337880'>And</span> <span
  m='339365'>lastly,</span> <span m='340850'>we'll</span> <span
  m='342335'>add</span> <span m='343820'>scale_fill_gradient</span> <span
  m='345305'>where</span> <span m='346790'>the</span> <span
  m='347997'>arguments</span> <span m='349205'>here,</span> <span
  m='350412'>we'll</span> <span m='351620'>put</span> <span
  m='352827'>low="black"</span> <span m='354035'>and</span> <span
  m='355242'>high="red"</span> <span m='356450'>to</span> <span
  m='356903'>make</span> <span m='357356'>our</span> <span
  m='357809'>color</span> <span m='358262'>scheme</span> <span
  m='358715'>range</span> <span m='359168'>from</span> <span
  m='359621'>black</span> <span m='360074'>to</span> <span
  m='360527'>red,</span> <span m='360980'>and</span> <span
  m='361717'>then</span> <span m='362454'>guide="legend"</span> <span
  m='363191'>to</span> <span m='363928'>make</span> <span m='364665'>sure</span>
  <span m='365402'>we</span> <span m='366139'>get</span> <span
  m='366876'>a</span> <span m='367613'>legend</span> <span m='368350'>on</span>
  <span m='368973'>our</span> <span m='369596'>plot.</span> </p><p><span
  m='370220'>If</span> <span m='370600'>you</span> <span m='370980'>hit</span>
  <span m='371360'>Enter</span> <span m='371740'>and</span> <span
  m='372120'>look</span> <span m='372500'>at</span> <span m='372880'>your</span>
  <span m='373260'>graphics</span> <span m='373640'>window</span> <span
  m='374020'>now,</span> <span m='374400'>you</span> <span
  m='374607'>should</span> <span m='374815'>see</span> <span
  m='375022'>that</span> <span m='375230'>each</span> <span m='375437'>of</span>
  <span m='375645'>the</span> <span m='375852'>states</span> <span
  m='376060'>is</span> <span m='376402'>colored</span> <span
  m='376744'>by</span> <span m='377086'>the</span> <span
  m='377428'>number</span> <span m='377770'>of</span> <span
  m='378112'>murders</span> <span m='378454'>in</span> <span
  m='378796'>that</span> <span m='379138'>state.</span> </p><p><span
  m='379480'>States</span> <span m='379833'>with</span> <span
  m='380186'>a</span> <span m='380539'>larger</span> <span
  m='380892'>number</span> <span m='381245'>of</span> <span
  m='381598'>murders</span> <span m='381951'>are</span> <span
  m='382304'>more</span> <span m='382657'>red.</span> </p><p><span
  m='383010'>So</span> <span m='383357'>it</span> <span m='383704'>looks</span>
  <span m='384051'>like</span> <span m='384398'>California</span> <span
  m='384745'>and</span> <span m='385092'>Texas</span> <span
  m='385440'>have</span> <span m='385825'>the</span> <span
  m='386210'>largest</span> <span m='386595'>number</span> <span
  m='386980'>of</span> <span m='387365'>murders.</span> </p><p><span
  m='387750'>But</span> <span m='388122'>is</span> <span m='388494'>that</span>
  <span m='388866'>just</span> <span m='389238'>because</span> <span
  m='389610'>they're</span> <span m='389982'>the</span> <span
  m='390354'>most</span> <span m='390726'>populous</span> <span
  m='391098'>states?</span> </p><p><span m='391470'>Let's</span> <span
  m='391762'>create</span> <span m='392054'>a</span> <span m='392346'>map</span>
  <span m='392638'>of</span> <span m='392930'>the</span> <span
  m='393222'>population</span> <span m='393514'>of</span> <span
  m='393806'>each</span> <span m='394098'>state</span> <span
  m='394390'>to</span> <span m='395070'>check.</span> </p><p><span
  m='395750'>So</span> <span m='396085'>back</span> <span m='396421'>in</span>
  <span m='396757'>the</span> <span m='397093'>R</span> <span
  m='397429'>Console,</span> <span m='397765'>hit</span> <span
  m='398100'>the</span> <span m='398436'>Up</span> <span
  m='398772'>arrow,</span> <span m='399108'>and</span> <span
  m='399444'>then,</span> <span m='399780'>instead</span> <span
  m='400576'>of</span> <span m='401372'>fill=Murders,</span> <span
  m='402168'>we</span> <span m='402964'>want</span> <span m='403760'>to</span>
  <span m='404556'>put</span> <span m='405352'>fill=Population</span> <span
  m='406148'>to</span> <span m='406944'>color</span> <span
  m='407740'>each</span> <span m='408322'>state</span> <span
  m='408905'>according</span> <span m='409488'>to</span> <span
  m='410071'>the</span> <span m='410654'>Population</span> <span
  m='411237'>variable.</span> </p><p><span m='411820'>If</span> <span
  m='412034'>you</span> <span m='412248'>look</span> <span m='412462'>at</span>
  <span m='412677'>the</span> <span m='412891'>graphics</span> <span
  m='413105'>window,</span> <span m='413320'>we</span> <span
  m='413692'>have</span> <span m='414065'>a</span> <span
  m='414438'>population</span> <span m='414811'>map</span> <span
  m='415184'>here</span> <span m='415557'>which</span> <span
  m='415930'>looks</span> <span m='416356'>exactly</span> <span
  m='416782'>the</span> <span m='417208'>same</span> <span m='417635'>as</span>
  <span m='418061'>our</span> <span m='418487'>murders</span> <span
  m='418913'>map.</span> </p><p><span m='419340'>So</span> <span
  m='419634'>we</span> <span m='419928'>need</span> <span m='420223'>to</span>
  <span m='420517'>plot</span> <span m='420812'>the</span> <span
  m='421106'>murder</span> <span m='421401'>rate</span> <span
  m='421695'>instead</span> <span m='421990'>of</span> <span
  m='422250'>the</span> <span m='422511'>number</span> <span
  m='422772'>of</span> <span m='423033'>murders</span> <span
  m='423294'>to</span> <span m='423555'>make</span> <span m='423816'>sure</span>
  <span m='424077'>we're</span> <span m='424338'>not</span> <span
  m='424599'>just</span> <span m='424860'>plotting</span> <span
  m='425512'>a</span> <span m='426165'>population</span> <span
  m='426817'>map.</span> </p><p><span m='427470'>So</span> <span
  m='427774'>in</span> <span m='428078'>our</span> <span m='428382'>R</span>
  <span m='428687'>Console,</span> <span m='428991'>let's</span> <span
  m='429295'>create</span> <span m='429600'>a</span> <span m='429961'>new</span>
  <span m='430322'>variable</span> <span m='430684'>for</span> <span
  m='431045'>the</span> <span m='431407'>murder</span> <span
  m='431768'>rate.</span> </p><p><span m='432130'>So</span> <span
  m='432675'>in</span> <span m='433220'>our</span> <span
  m='433765'>murderMap</span> <span m='434310'>data</span> <span
  m='434855'>frame,</span> <span m='435400'>we'll</span> <span
  m='435945'>create</span> <span m='436490'>the</span> <span
  m='437035'>MurderRate</span> <span m='437580'>variable,</span> <span
  m='438575'>which</span> <span m='439570'>is</span> <span
  m='440565'>equal</span> <span m='441560'>to</span> <span
  m='442555'>murderMap$Murders--</span> <span m='443550'>the</span> <span
  m='444701'>number</span> <span m='445852'>of</span> <span
  m='447003'>murders--</span> <span m='448155'>divided</span> <span
  m='449306'>by</span> <span m='450457'>murderMap$Population</span> <span
  m='451608'>times</span> <span m='452760'>100,000.</span> </p><p><span
  m='454940'>So</span> <span m='455257'>we've</span> <span
  m='455574'>created</span> <span m='455891'>a</span> <span
  m='456208'>new</span> <span m='456525'>variable</span> <span
  m='456842'>that's</span> <span m='457159'>the</span> <span
  m='457776'>number</span> <span m='458393'>of</span> <span
  m='459010'>murders</span> <span m='459628'>per</span> <span
  m='460245'>100,000</span> <span m='460862'>population.</span> </p><p><span
  m='461480'>Now</span> <span m='461853'>let's</span> <span
  m='462227'>redo</span> <span m='462600'>our</span> <span
  m='462974'>plot</span> <span m='463348'>with</span> <span
  m='463721'>the</span> <span m='464095'>fill</span> <span
  m='464469'>equal</span> <span m='464842'>to</span> <span
  m='465216'>MurderRate.</span> </p><p><span m='465590'>So</span> <span
  m='465901'>hit</span> <span m='466213'>the</span> <span m='466524'>Up</span>
  <span m='466836'>arrow</span> <span m='467147'>twice</span> <span
  m='467459'>to</span> <span m='467770'>get</span> <span m='468082'>back</span>
  <span m='468393'>to</span> <span m='468705'>the</span> <span
  m='469016'>plotting</span> <span m='469328'>command,</span> <span
  m='469640'>and</span> <span m='470153'>instead</span> <span
  m='470667'>of</span> <span m='471181'>fill=Population,</span> <span
  m='471695'>this</span> <span m='472208'>time</span> <span
  m='472722'>we'll</span> <span m='473236'>put</span> <span
  m='473750'>fill=MurderRate.</span> </p><p><span m='480310'>If</span> <span
  m='480603'>you</span> <span m='480897'>look</span> <span m='481191'>at</span>
  <span m='481485'>your</span> <span m='481778'>graphics</span> <span
  m='482072'>window</span> <span m='482366'>now,</span> <span
  m='482660'>you</span> <span m='483066'>should</span> <span
  m='483473'>see</span> <span m='483880'>that</span> <span m='484286'>the</span>
  <span m='484693'>plot</span> <span m='485100'>is</span> <span
  m='485506'>surprisingly</span> <span m='485913'>maroon-looking.</span>
  </p><p><span m='486320'>There</span> <span m='486688'>aren't</span> <span
  m='487056'>really</span> <span m='487425'>any</span> <span
  m='487793'>red</span> <span m='488161'>states.</span> </p><p><span
  m='488530'>Why?</span> </p><p><span m='489770'>It</span> <span
  m='490127'>turns</span> <span m='490484'>out</span> <span
  m='490841'>that</span> <span m='491198'>Washington,</span> <span
  m='491555'>DC</span> <span m='491912'>is</span> <span m='492270'>an</span>
  <span m='492637'>outlier</span> <span m='493005'>with</span> <span
  m='493372'>a</span> <span m='493740'>very</span> <span m='494107'>high</span>
  <span m='494475'>murder</span> <span m='494842'>rate,</span> <span
  m='495210'>but</span> <span m='495465'>it's</span> <span
  m='495721'>such</span> <span m='495976'>a</span> <span m='496232'>small</span>
  <span m='496487'>region</span> <span m='496743'>on</span> <span
  m='496998'>the</span> <span m='497254'>map</span> <span m='497510'>that</span>
  <span m='497860'>we</span> <span m='498210'>can't</span> <span
  m='498560'>even</span> <span m='498910'>see</span> <span m='499260'>it.</span>
  </p><p><span m='499610'>So</span> <span m='500078'>let's</span> <span
  m='500547'>redo</span> <span m='501016'>our</span> <span
  m='501485'>plot,</span> <span m='501953'>removing</span> <span
  m='502422'>any</span> <span m='502891'>observations</span> <span
  m='503360'>with</span> <span m='503736'>murder</span> <span
  m='504113'>rates</span> <span m='504490'>above</span> <span
  m='504866'>10,</span> <span m='505243'>which</span> <span m='505620'>we</span>
  <span m='506125'>know</span> <span m='506631'>will</span> <span
  m='507137'>only</span> <span m='507642'>exclude</span> <span
  m='508148'>Washington,</span> <span m='508654'>DC.</span> </p><p><span
  m='509160'>Keep</span> <span m='509480'>in</span> <span m='509800'>mind</span>
  <span m='510120'>that</span> <span m='510440'>when</span> <span
  m='510760'>interpreting</span> <span m='511080'>and</span> <span
  m='511400'>explaining</span> <span m='511720'>the</span> <span
  m='512126'>resulting</span> <span m='512533'>plot,</span> <span
  m='512939'>you</span> <span m='513346'>should</span> <span
  m='513752'>always</span> <span m='514159'>note</span> <span
  m='514465'>what</span> <span m='514771'>you</span> <span m='515078'>did</span>
  <span m='515384'>to</span> <span m='515690'>create</span> <span
  m='515997'>it:</span> <span m='516303'>removed</span> <span
  m='516610'>Washington,</span> <span m='517330'>DC</span> <span
  m='518050'>from</span> <span m='518770'>the</span> <span
  m='519490'>data.</span> </p><p><span m='520210'>So</span> <span
  m='520558'>in</span> <span m='520906'>your</span> <span m='521255'>R</span>
  <span m='521603'>Console,</span> <span m='521952'>hit</span> <span
  m='522300'>the</span> <span m='522649'>Up</span> <span m='522997'>arrow</span>
  <span m='523346'>again,</span> <span m='523694'>and</span> <span
  m='524043'>this</span> <span m='524391'>time,</span> <span
  m='524740'>after</span> <span m='526106'>guide="legend",</span> <span
  m='527472'>we'll</span> <span m='528838'>type</span> <span
  m='530205'>limits=c(0,10)</span> <span m='531571'>and</span> <span
  m='532937'>hit</span> <span m='534303'>Enter.</span> </p><p><span
  m='535670'>Now</span> <span m='535986'>if</span> <span m='536303'>you</span>
  <span m='536620'>look</span> <span m='536936'>back</span> <span
  m='537253'>at</span> <span m='537570'>your</span> <span
  m='537886'>graphics</span> <span m='538203'>window,</span> <span
  m='538520'>you</span> <span m='538861'>can</span> <span m='539202'>see</span>
  <span m='539543'>a</span> <span m='539884'>range</span> <span
  m='540225'>of</span> <span m='540566'>colors</span> <span m='540907'>on</span>
  <span m='541248'>the</span> <span m='541589'>map.</span> </p><p><span
  m='541930'>In</span> <span m='542174'>this</span> <span
  m='542418'>video,</span> <span m='542662'>we</span> <span
  m='542906'>saw</span> <span m='543150'>how</span> <span m='543395'>we</span>
  <span m='543639'>can</span> <span m='543883'>make</span> <span
  m='544127'>a</span> <span m='544371'>heat</span> <span m='544615'>map</span>
  <span m='544860'>on</span> <span m='545170'>a</span> <span
  m='545480'>map</span> <span m='545790'>of</span> <span m='546100'>the</span>
  <span m='546410'>United</span> <span m='546720'>States,</span> <span
  m='547030'>which</span> <span m='547340'>is</span> <span
  m='547673'>very</span> <span m='548006'>useful</span> <span
  m='548340'>for</span> <span m='548673'>organizations</span> <span
  m='549006'>like</span> <span m='549340'>the</span> <span
  m='549673'>World</span> <span m='550006'>Health</span> <span
  m='550340'>Organization</span> <span m='550804'>or</span> <span
  m='551268'>government</span> <span m='551733'>entities</span> <span
  m='552197'>who</span> <span m='552662'>want</span> <span m='553126'>to</span>
  <span m='553591'>show</span> <span m='554055'>data</span> <span
  m='554520'>to</span> <span m='555018'>the</span> <span
  m='555517'>public</span> <span m='556016'>organized</span> <span
  m='556515'>by</span> <span m='557013'>state</span> <span m='557512'>or</span>
  <span m='558011'>country.</span> </p><p><span m='558510'>In</span> <span
  m='558888'>the</span> <span m='559266'>next</span> <span
  m='559645'>video,</span> <span m='560023'>we'll</span> <span
  m='560401'>conclude</span> <span m='560780'>by</span> <span
  m='561275'>discussing</span> <span m='561770'>the</span> <span
  m='562265'>analytics</span> <span m='562760'>edge</span> <span
  m='563255'>of</span> <span m='563750'>predictive</span> <span
  m='564245'>policing.</span> </p>
uid: 043fc419195005dd6080e3330724c725
type: course
layout: video
---
