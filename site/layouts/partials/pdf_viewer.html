<div class="w-100 h-100">
  <div class="pr-4">
    <a href="{{ .Params.file_location }}">
      <div class="btn bg-dark-gray rounded float-right mb-3">
        <span>DOWNLOAD</span>
        <div class="ripple-container"></div>
      </div>
    </a>
  </div>
  <div id="pdfWrapper_{{ .Params.uid }}" class="w-100 h-100">
  </div>
  <script type="text/javascript">
    /**
      This is some raw Javascript that requests the PDF that is to be loaded
    */
    {{- $pdfFunction := safeJS (printf "loadPdf_%s" .Params.uid) -}}
    const {{ $pdfFunction }} = () => {
      if (window.XMLHttpRequest) {
        request = new XMLHttpRequest();
      } else {
        request = new ActiveXObject("Microsoft.XMLHTTP")
      }
      request.open("GET", decodeURIComponent("{{ .Params.file_location }}"), true)
      request.responseType = "blob"
      request.send()
      request.onload = (e) => {
        if (request.status === 200) {
          const file = window.URL.createObjectURL(request.response)
          var viewerUrl = '/pdfjs/web/viewer.html?file=' + encodeURIComponent(file);    
        document.getElementById("pdfWrapper_{{ .Params.uid }}").innerHTML = '<iframe class="w-100 h-100" frameborder="0" scrolling="yes" seamless="seamless" src='+viewerUrl+'></iframe>'
        };
      }
    }
    {{ $pdfFunction }}()
  </script>
</div>
